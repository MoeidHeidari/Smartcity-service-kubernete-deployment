"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const index_1 = require("../lib/index");
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
const provider_generator_1 = require("@cdktf/provider-generator");
const child_process_1 = require("child_process");
const providers = [
    "hashicorp/aws@ ~>3.74.0",
    "kreuzwerker/docker@ ~>2.15.0",
    "hashicorp/google@ ~>3.87.0",
    "hashicorp/null@ ~>3.1.0",
    "hashicorp/azuread@ ~>2.17.0",
    "hashicorp/local@ ~>2.1.0",
    "alexkappa/auth0@ ~>0.26.2",
    "DataDog/datadog@ ~>3.8.1",
    "hashicorp/kubernetes@ ~>2.11.0",
];
var Synth;
(function (Synth) {
    Synth[Synth["yes"] = 0] = "yes";
    Synth[Synth["never"] = 1] = "never";
})(Synth || (Synth = {}));
const cdktfBin = path.join(__dirname, "../../../cdktf-cli/bin/cdktf");
const cdktfDist = path.join(__dirname, "../../../../dist");
const createTestCase = (opts) => (name, hcl, shouldSynth) => {
    if (opts.skip) {
        describe.skip(name, () => { });
        return;
    }
    describe(name, () => {
        let result;
        beforeAll(() => {
            result = index_1.convert(hcl, {
                language: "typescript",
                providerSchema: cachedProviderSchema,
            });
        });
        it("snapshot", async () => {
            const { all } = await result;
            expect(all).toMatchSnapshot();
        });
        if (shouldSynth === Synth.yes) {
            it("plan", async () => {
                const filename = name.replace(/\s/g, "-");
                const { imports, code } = await result;
                // Have a before all somewhere above bootstrap a TS project
                // __dirname should be replaceed by the bootstrapped directory
                const pathToThisProjectsFile = path.join(projectDir, filename + ".ts");
                const fileContent = `
        import { Construct } from "constructs";
        import { App, TerraformStack } from "cdktf";
        ${imports}

        class MyStack extends TerraformStack {
          constructor(scope: Construct, name: string) {
            super(scope, name);

            ${code}

          }
        }

        const app = new App();
        new MyStack(app, "${filename}");
        app.synth();
        `;
                fs.writeFileSync(pathToThisProjectsFile, fileContent, "utf8");
                const stdout = child_process_1.execSync(`cd ${projectDir} && ${cdktfBin} synth -a 'npx ts-node ${filename}.ts' -o ./${filename}-output`);
                expect(stdout.toString()).toEqual(expect.stringContaining(`Generated Terraform code for the stacks`));
            });
        }
    });
};
const testCase = {
    test: createTestCase({}),
    skip: createTestCase({ skip: true }),
};
let cachedProviderSchema;
let projectDir;
describe("convert", () => {
    beforeAll(async () => {
        // Get all the provider schemas
        const schemaPromise = provider_generator_1.readSchema(providers.map((spec) => provider_generator_1.ConstructsMakerProviderTarget.from(new provider_generator_1.config.TerraformProviderConstraint(spec), provider_generator_1.LANGUAGES[0])));
        // Initialize a new project
        projectDir = fs.mkdtempSync("cdktf-convert-test");
        child_process_1.execSync(`cd ${projectDir} && ${cdktfBin} init --local --dist=${cdktfDist} --project-name="hello" --project-description="world" --template=typescript --enable-crash-reporting=false`);
        const cdktfJson = JSON.parse(fs.readFileSync(path.join(projectDir, "cdktf.json"), "utf8"));
        fs.writeFileSync(path.join(projectDir, "cdktf.json"), JSON.stringify({
            ...cdktfJson,
            terraformProviders: providers,
            terraformModules: ["terraform-aws-modules/vpc/aws@ ~>3.11.5"],
        }, null, 2));
        child_process_1.execSync(`cd ${projectDir} && ${cdktfBin} get`);
        const { providerSchema } = await schemaPromise;
        cachedProviderSchema = providerSchema;
    }, 500000);
    afterAll(() => {
        fs.rmdirSync(projectDir, { recursive: true });
    });
    testCase.test("output", `
      output "cidr_out" {
          value = "test"
      }`, Synth.yes);
    testCase.test("sensitive output", `
      output "cidr_out" {
          value = "test"
          sensitive = true
      }`, Synth.yes);
    testCase.test("output withdescription", `
      output "cidr_out" {
          value = "test"
          sensitive = true
          description = "Best output"
      }`, Synth.yes);
    testCase.test("multiple outputs", `
      output "first_cidr_out" {
          value = "first"
      }
      output "second_cidr_out" {
          value = "second"
      }`, Synth.yes);
    testCase.test("empty provider", `provider "docker" {}`, Synth.yes);
    testCase.test("null provider", `provider "null" {}
  resource "null_resource" "test" {}
  `, Synth.yes);
    testCase.test("provider with complex config", `
    provider "aws" {
      access_key                  = "mock_access_key"
      region                      = "us-east-1"
      secret_key                  = "mock_secret_key"
      skip_credentials_validation = true
      skip_requesting_account_id  = true
    
      endpoints {
        dynamodb = "http://localhost:8000"
      }
    }
  `, Synth.yes);
    testCase.test("simple resource", `
    provider "aws" {
      region                      = "us-east-1"
    }
    resource "aws_vpc" "example" {
      cidr_block = "10.0.0.0/16"
    }`, Synth.yes);
    testCase.test("complex resource", ` 
    provider "aws" {
      region                      = "us-east-1"
    }
    resource "aws_cloudfront_distribution" "s3_distribution" {
      origin {
        domain_name = "aws_s3_bucket.b.bucket_regional_domain_name"
        origin_id   = "local_s3_origin_id"
    
        s3_origin_config {
          origin_access_identity = "origin-access-identity/cloudfront/ABCDEFG1234567"
        }
      }
    
      enabled             = true
      is_ipv6_enabled     = true
      comment             = "Some comment"
      default_root_object = "index.html"
    
      logging_config {
        include_cookies = false
        bucket          = "mylogs.s3.amazonaws.com"
        prefix          = "myprefix"
      }
    
      aliases = ["mysite.example.com", "yoursite.example.com"]
    
      default_cache_behavior {
        allowed_methods  = ["DELETE", "GET", "HEAD", "OPTIONS", "PATCH", "POST", "PUT"]
        cached_methods   = ["GET", "HEAD"]
        target_origin_id = "local_s3_origin_id"
    
        forwarded_values {
          query_string = false
    
          cookies {
            forward = "none"
          }
        }
    
        viewer_protocol_policy = "allow-all"
        min_ttl                = 0
        default_ttl            = 3600
        max_ttl                = 86400
      }
    
      # Cache behavior with precedence 0
      ordered_cache_behavior {
        path_pattern     = "/content/immutable/*"
        allowed_methods  = ["GET", "HEAD", "OPTIONS"]
        cached_methods   = ["GET", "HEAD", "OPTIONS"]
        target_origin_id = "local_s3_origin_id"
    
        forwarded_values {
          query_string = false
          headers      = ["Origin"]
    
          cookies {
            forward = "none"
          }
        }
    
        min_ttl                = 0
        default_ttl            = 86400
        max_ttl                = 31536000
        compress               = true
        viewer_protocol_policy = "redirect-to-https"
      }
    
      # Cache behavior with precedence 1
      ordered_cache_behavior {
        path_pattern     = "/content/*"
        allowed_methods  = ["GET", "HEAD", "OPTIONS"]
        cached_methods   = ["GET", "HEAD"]
        target_origin_id = "local_s3_origin_id"
    
        forwarded_values {
          query_string = false
    
          cookies {
            forward = "none"
          }
        }
    
        min_ttl                = 0
        default_ttl            = 3600
        max_ttl                = 86400
        compress               = true
        viewer_protocol_policy = "redirect-to-https"
      }
    
      price_class = "PriceClass_200"
    
      restrictions {
        geo_restriction {
          restriction_type = "whitelist"
          locations        = ["US", "CA", "GB", "DE"]
        }
      }
    
      tags = {
        Environment = "production"
      }
    
      viewer_certificate {
        cloudfront_default_certificate = true
      }
    }`, Synth.yes);
    testCase.test("simple data source", `
    provider "aws" {
      region                      = "us-east-1"
    }
    data "aws_subnet" "selected" {
      vpc_id = "subnet_id"
    }`, Synth.yes);
    testCase.test("locals", `
    locals {
      service_name = "forum"
      owner        = "Community Team"
      is_it_great  = true
      how_many     = 42
    }
    output "combined-so-it-does-not-get-removed" {
      value = "\${local.service_name},\${local.owner},\${local.is_it_great},\${local.how_many}"
    }
    `, Synth.yes);
    testCase.test("multiple locals blocks", `
    locals {
      service_name = "forum"
      owner        = "Community Team"
    }

    locals {
      is_it_great  = true
      how_many     = 42
    }
    
    output "combined-so-it-does-not-get-removed" {
      value = "\${local.service_name},\${local.owner},\${local.is_it_great},\${local.how_many}"
    }`, Synth.yes);
    testCase.test("resource references", `
    provider "aws" {
      region                      = "us-east-1"
    }
    resource "aws_kms_key" "examplekms" {
      description             = "KMS key 1"
      deletion_window_in_days = 7
    }
    
    resource "aws_s3_bucket" "examplebucket" {
      bucket = "examplebuckettftest"
      acl    = "private"
    }
    
    resource "aws_s3_bucket_object" "examplebucket_object" {
      key        = "someobject"
      bucket     = aws_s3_bucket.examplebucket.id
      source     = "index.html"
      kms_key_id = aws_kms_key.examplekms.arn
    }`, Synth.yes);
    testCase.test("locals references", `
    provider "aws" {
      region                      = "us-east-1"
    }

    locals {
      bucket_name = "foo"
    }
    
    resource "aws_s3_bucket" "examplebucket" {
      bucket = local.bucket_name
      acl    = "private"
    }`, Synth.yes);
    testCase.test("variable references", `
    provider "aws" {
      region                      = "us-east-1"
    }
    variable "bucket_name" {
      type    = string
      default = "demo"
    }
    
    resource "aws_s3_bucket" "examplebucket" {
      bucket = var.bucket_name
      acl    = "private"
    }`, Synth.yes);
    testCase.test("data references", `
    provider "aws" {
      region                      = "us-east-1"
    }
    variable "bucket_name" {
      type    = string
      default = "demo"
    }
    
    data "aws_s3_bucket" "examplebucket" {
      bucket = var.bucket_name
    }
    
    resource "aws_s3_bucket_object" "examplebucket_object" {
      key        = "someobject"
      bucket     = data.aws_s3_bucket.examplebucket.arn
      source     = "index.html"
    }`, Synth.yes);
    testCase.test("double references", `
    provider "aws" {
      region                      = "us-east-1"
    }
    variable "bucket_name" {
      type    = string
      default = "demo"
    }
    
    resource "aws_s3_bucket" "examplebucket" {
      bucket = var.bucket_name
      acl    = "private"
      tags = {
        tag-key = var.bucket_name
      }
    }`, Synth.yes);
    testCase.test("modules", `
    module "vpc" {
      source = "terraform-aws-modules/vpc/aws"
    
      name = "my-vpc"
      cidr = "10.0.0.0/16"
    
      azs             = ["eu-west-1a", "eu-west-1b", "eu-west-1c"]
      private_subnets = ["10.0.1.0/24", "10.0.2.0/24", "10.0.3.0/24"]
      public_subnets  = ["10.0.101.0/24", "10.0.102.0/24", "10.0.103.0/24"]
    
      enable_nat_gateway = true
      enable_vpn_gateway = true
    
      tags = {
        Terraform = "true"
        Environment = "dev"
      }
    }`, Synth.yes);
    testCase.test("duplicate modules", `
    module "vpca" {
      source = "terraform-aws-modules/vpc/aws"
    
      name = "my-vpc-a"
    }
    
    module "vpcb" {
      source = "terraform-aws-modules/vpc/aws"
    
      name = "my-vpc-b"
    }`, Synth.yes);
    testCase.test("referenced modules", `
      module "vpc" {
        source = "terraform-aws-modules/vpc/aws"
      
        name = "my-vpc"
        cidr = "10.0.0.0/16"
      
        azs             = ["eu-west-1a", "eu-west-1b", "eu-west-1c"]
        private_subnets = ["10.0.1.0/24", "10.0.2.0/24", "10.0.3.0/24"]
        public_subnets  = ["10.0.101.0/24", "10.0.102.0/24", "10.0.103.0/24"]
      
        enable_nat_gateway = true
        enable_vpn_gateway = true
      
        tags = {
          Terraform = "true"
          Environment = "dev"
        }
      }
      
      output "subnet_ids" {
        value = module.vpc.public_subnets
      }`, Synth.yes);
    testCase.test("arithmetics", `
      variable "members" {
        type = number
      }
      variable "admins" {
        type = number
      }
      
      output "arithmetics" {
        value = var.members + var.admins
      }`, Synth.yes);
    testCase.test("conditionals", `
        provider "aws" {
          region                      = "us-east-1"
        }
        resource "aws_kms_key" "examplekms" {
          description             = "KMS key 1"
          deletion_window_in_days = 7
        }
        
        resource "aws_s3_bucket" "examplebucket" {
          bucket = "examplebuckettftest"
          acl    = "private"
        }
        
        resource "aws_s3_bucket_object" "examplebucket_object" {
          key        = "someobject"
          bucket     = aws_kms_key.examplekms.deletion_window_in_days > 3 ? aws_s3_bucket.examplebucket.id : []
          source     = "index.html"
          kms_key_id = aws_kms_key.examplekms.arn
        }`, Synth.yes);
    testCase.test("for expression 1", `
        variable "users" {
          type = map(object({
            is_admin = boolean
          }))
        }
        
        locals {
          admin_users = {
            for name, user in var.users : name => user
            if user.is_admin
          }
          regular_users = {
            for name, user in var.users : name => user
            if !user.is_admin
          }
        }
        
        output "combined-so-it-does-not-get-removed" {
          value = "\${local.admin_users},\${local.regular_users}"
        }
        `, Synth.yes);
    testCase.test("for expression 2", `
      variable "users" {
        type = map(object({
          role = string
        }))
      }
      
      locals {
        users_by_role = {
          for name, user in var.users : user.role => name...
        }
      }
      
      output "so-it-does-not-get-removed" {
        value = local.users_by_role
      }`, Synth.yes);
    testCase.test("for expression 3", `
        provider "datadog" {
          api_key = "api_key"
          app_key = "app_key"
        }

        variable "users" {
          type = list(object({
            id = string
          }))
        }
        
        resource "datadog_monitor" "hard_query" {
          name    = "queries are hard"
          message = "here we go"
          query   = join(" && ", [for o in var.users : "!(!\${o.id})"])
          type    = "metric alert"
        }`, Synth.yes);
    testCase.test("resource references with HCL functions", `
      provider "aws" {
        region                      = "us-east-1"
      }
      resource "aws_kms_key" "examplekms" {
        description             = "KMS key 1"
        deletion_window_in_days = 7
      }
      
      resource "aws_s3_bucket" "examplebucket" {
        bucket = "examplebuckettftest"
        acl    = "private"
      }
      
      resource "aws_s3_bucket_object" "examplebucket_object" {
        key        = "someobject"
        bucket     = element(aws_s3_bucket.examplebucket, 0).id
        source     = "index.html"
        kms_key_id = aws_kms_key.examplekms.arn
      }`, Synth.yes);
    testCase.test("for each on list using splat", `
      provider "aws" {
        region                      = "us-east-1"
      }
      variable "buckets" {
        type    = list(string)
      }

      resource "aws_kms_key" "examplekms" {
        description             = "KMS key 1"
        deletion_window_in_days = 7
      }
      
      resource "aws_s3_bucket" "examplebucket" {
        for_each = toset(var.buckets.*)

        bucket = each.key
        acl    = "private"
      }
      
      resource "aws_s3_bucket_object" "examplebucket_object" {
        for_each = toset(aws_s3_bucket.examplebucket.*)

        key        = "someobject"
        bucket     = each.key
        source     = "index.html"
        kms_key_id = aws_kms_key.examplekms.arn
      }
      `, Synth.yes);
    testCase.test("for_each loops", `
    provider "aws" {
      region                      = "us-east-1"
    }
      variable "users" {
        type = set(string)
      }

      resource "aws_iam_user" "lb" {
        for_each = var.users
        name = each.key
        path = "/system/"
      
        tags = {
          tag-key = "tag-value"
        }
      }
      `, Synth.yes);
    testCase.test("property access through square brackets", `
      provider "aws" {
        region                      = "us-east-1"
      }
      variable "settings" {
        type = map(string)
      }

      resource "aws_s3_bucket" "examplebucket" {
        bucket = var.settings["bucket_name"]
        acl    = "private"
      }
      `, Synth.yes);
    testCase.test("list access through square brackets", `
      provider "aws" {
        region                      = "us-east-1"
      }
      variable "settings" {
        type = list(map(string))
      }

      resource "aws_s3_bucket" "examplebucket" {
        bucket = var.settings[0]["bucket_name"]
        acl    = "private"
      }
      `, Synth.yes);
    testCase.test("count loops", `
        provider "aws" {
          region                      = "us-east-1"
        }
        variable "users" {
          type = set(string)
        }

        resource "aws_iam_user" "lb" {
          count = length(var.users)
          name = element(var.users, count.index)
          path = "/system/"
        
          tags = {
            tag-key = "tag-value"
          }
        }`, Synth.yes);
    testCase.test("simple count", `
    provider "aws" {
      region                      = "us-east-1"
    }
    resource "aws_instance" "multiple_servers" {
      count = 4
    
      ami           = "ami-0c2b8ca1dad447f8a"
      instance_type = "t2.micro"
    
      tags = {
        Name = "Server \${count.index}"
      }
    }
    `, Synth.yes);
    testCase.test("dynamic blocks", `
      provider "aws" {
        region                      = "us-east-1"
      }
      variable "settings" {
        type = list(map(string))
      }

      variable "namespace" {
        type = string
      }

      resource "aws_elastic_beanstalk_environment" "tfenvtest" {
        name                = "tf-test-name"
        application         = "best-app"
        solution_stack_name = "64bit Amazon Linux 2018.03 v2.11.4 running Go 1.12.6"
      
        dynamic "setting" {
          for_each = var.settings
          content {
            namespace = var.namespace
            name = setting.value["name"]
            value = setting.value["value"]
          }
        }
      }`, Synth.yes);
    testCase.test("multiple blocks", `
    provider "aws" {
      region                      = "us-east-1"
    }
    resource "aws_security_group" "allow_tls" {
      name        = "allow_tls"
      description = "Allow TLS inbound traffic"
    
      ingress {
        description      = "TLS from VPC"
        from_port        = 443
        to_port          = 443
        protocol         = "tcp"
      }

      ingress {
        description      = "TLS from VPC"
        from_port        = 80
        to_port          = 80
        protocol         = "tcp"
      }

      ingress {
        from_port        = 8080
        to_port          = 8080
        protocol         = "tcp"
      }
    
      egress {
        from_port        = 0
        to_port          = 0
        protocol         = "-1"
        cidr_blocks      = ["0.0.0.0/0"]
        ipv6_cidr_blocks = ["::/0"]
      }
    
      tags = {
        Name = "allow_tls"
      }
    }`, Synth.yes);
    testCase.test("provider alias", `
      provider "aws" {
        region = "us-east-1"
      }

      provider "aws" {
        alias  = "west"
        region = "us-west-2"
      }

      resource "aws_instance" "foo" {
        provider = aws.west
      
        foo = "bar"
      }

      module "vpc" {
        source = "terraform-aws-modules/vpc/aws"
        providers = {
          aws = aws.west
        }
      }        
      `, Synth.never);
    testCase.test("local module", `
    module "aws_vpc" {
      source = "./aws_vpc"
    }        
    `, Synth.never);
    testCase.test("complex for each loops", `
  provider "aws" {
    region = "us-east-1"
  }

  resource "aws_acm_certificate" "example" {
    domain_name       = "example.com"
    validation_method = "DNS"
  }
  
  data "aws_route53_zone" "example" {
    name         = "example.com"
    private_zone = false
  }
  
  resource "aws_route53_record" "example" {
    for_each = {
      for dvo in aws_acm_certificate.example.domain_validation_options : dvo.domain_name => {
        name   = dvo.resource_record_name
        record = dvo.resource_record_value
        type   = dvo.resource_record_type
      }
    }
  
    allow_overwrite = true
    name            = each.value.name
    records         = [each.value.record]
    ttl             = 60
    type            = each.value.type
    zone_id         = data.aws_route53_zone.example.zone_id
  }
  
  resource "aws_acm_certificate_validation" "example" {
    certificate_arn         = aws_acm_certificate.example.arn
    validation_record_fqdns = [for record in aws_route53_record.example : record.fqdn]
  }
  
  resource "aws_lb_listener" "example" {
    # ... other configuration ...
    
    certificate_arn   = aws_acm_certificate_validation.example.certificate_arn
    load_balancer_arn = "best-lb-arn" 
    default_action  {
      type             = "forward"
      target_group_arn = "best-target"
    }
  }
          
  `, Synth.yes);
    testCase.test("local backend", `
      terraform {
        backend "local" {
          path = "relative/path/to/terraform.tfstate"
        }
      }     
      `, Synth.yes);
    testCase.test("remote backend", `
      terraform {
        backend "remote" {
          hostname = "app.terraform.io"
          organization = "company"
      
          workspaces {
            name = "my-app-prod"
          }
        }
      }
      `, Synth.yes);
    testCase.test("numeric property access", `
      provider "google" {
        project = "my-project"
        region  = "us-central1"
      }
      resource "google_compute_instance" "example" {
        name          = "example"
        machine_type  = "f1-micro"
        zone          = "us-east1-b"

        boot_disk {
          initialize_params {
            image = "debian-cloud/debian-9"
          }
        }

        network_interface {
          network = "default"

          access_config {
            // Ephemeral IP
          }
        }
      }

      output "public_ip" {
        value = "\${google_compute_instance.example.network_interface.0.access_config.0.assigned_nat_ip}"
      }
      `, Synth.yes);
    testCase.test("blocks should be arrays", `
    provider "google" {
      project = "my-project"
      region  = "us-central1"
    }
    resource "google_compute_autoscaler" "example" {
      name   = "example-autoscaler"
      zone   = "us-east1-b"
      target = "target-for-example-autoscaler"
    
      autoscaling_policy = {
        max_replicas    = 8
        min_replicas    = 2
        cooldown_period = 60
    
        cpu_utilization = {
          target = 0.5
        }
      }
    }
    `, Synth.yes);
    testCase.test("provider with var reference", `
    variable "domain" {
      description = "A domain"
    }
    provider "auth0" {
      domain        = var.domain
      client_id     = "client_id"
      client_secret = "client_secret"
    }
    `, Synth.yes);
    testCase.test("data local_file", `
    provider "local" {}
    data "local_file" "_01_please_verify" {
      filename = "./email_templates/01_please_verify/template.html"
    }
    `, Synth.yes);
    testCase.test("required namespaced provider", `
      variable "domain" {
        description = "A domain"
      }
      provider "auth0" {
        domain = var.domain
        client_id = "42"
        client_secret = "secret"
      }
      
      terraform {
        required_providers {
          auth0 = {
            source  = "alexkappa/auth0"
            version = "0.19.0"
          }
        }
      }
      `, Synth.yes);
    testCase.test("for_each with var usage", `
      provider "azuread" {
        tenant_id = "00000000-0000-0000-0000-000000000000"
      }
      variable "one_set_of_users" {
        description = "users"
      }
      variable "other_set_of_users" {
        description = "users"
      }
      variable "azure_ad_domain_name" {
        description = "domain"
      }
      resource "azuread_user" "azure_users" {
        for_each = merge(
          var.one_set_of_users,
          var.other_set_of_users,
        )
      
        user_principal_name = "\${each.value}\${var.azure_ad_domain_name}"
        display_name        = each.key
      }
      `, Synth.yes);
    testCase.test("terraform workspace", `
    module "example" {
      source = "./my-module"
      name_prefix = "app-\${terraform.workspace}"
    }
    `, Synth.never);
    testCase.test("maps are not arrays", `
  provider "kubernetes" {
    config_path    = "~/.kube/config"
    config_context = "my-context"
  }

  resource "kubernetes_secret" "secrets-xxx" {
    metadata {
      name      = "secrets-xxx"
    }
    data = {
      "xxx" : "yyy"
    }
  }
  `, Synth.yes);
    testCase.test("maps dont get camel case keys", `
  provider "kubernetes" {
    config_path    = "~/.kube/config"
    config_context = "my-context"
  }

  resource "kubernetes_secret" "secrets-xxx" {
    metadata {
      name      = "secrets-xxx"
    }
    data = {
      "camel_cased_key": "yes"
    }
  }
  `, Synth.yes);
    testCase.test("all module types", `
      module "consul" {
        source = "./consul"
      }
      module "consul-registry" {
        source = "hashicorp/consul/aws"
        version = "0.1.0"
      }
      module "consul-hosted-registry" {
        source = "app.terraform.io/example-corp/k8s-cluster/azurerm"
        version = "1.1.0"
      }
      module "consul-github" {
        source = "github.com/hashicorp/example"
      }
      module "consul-git" {
        source = "git@github.com:hashicorp/example.git"
      }
      module "consul-butbucket" {
        source = "bitbucket.org/hashicorp/terraform-consul-aws"
      }
      module "vpc" {
        source = "git::https://example.com/vpc.git"
      }
      module "storage" {
        source = "git::ssh://username@example.com/storage.git"
      }
      `, Synth.never);
    testCase.test("number output", `
    output "test" {
      value = 42
    }
    `, Synth.yes);
    testCase.test("same name local, var, out", `
    variable "test" {
      type    = string
    }
    locals {
      test = "\${var.test} + 1"
    }
    output "test" {
      value = "\${local.test}"
    }
    `, Synth.yes);
    testCase.test("aliased duplicate provider with var reference", `
    variable "domain" {
      description = "A domain"
    }
    variable "client_id" {
      description = "A client_id"
    }
    variable "client_secret" {
      description = "A client_secret"
    }
    provider "auth0" {
      domain        = var.domain
      client_id     = var.client_id
      client_secret = var.client_secret
    }
    provider "auth0" {
      alias         = "private_auth0"
      domain        = var.domain
      client_id     = var.client_id
      client_secret = var.client_secret
      debug         = true
    }
    `, Synth.yes);
    testCase.test("remote state", `
      data "terraform_remote_state" "vpc" {
        backend = "remote"

        config = {
          organization = "hashicorp"
          workspaces = {
            name = "vpc-prod"
          }
        }
      }
      `, Synth.yes);
    testCase.test("remote state types", `
      data "terraform_remote_state" "etcdv3" {
        backend = "etcdv3"

        config = {
          endpoints = ["etcd-1:2379", "etcd-2:2379", "etcd-3:2379"]
          lock      = true
          prefix    = "terraform-state/"
        }
      }

      data "terraform_remote_state" "s3" {
        backend = "s3"

        config = {
          bucket = "mybucket"
          key    = "path/to/my/key"
          region = "us-east-1"
        }
      }
      `, Synth.yes);
    testCase.test("property level renamings", `
    provider "aws" {
      region                      = "us-east-1"
    }
    resource "aws_guardduty_filter" "MyFilter" {
      name        = "MyFilter"
      action      = "ARCHIVE"
      detector_id = "id"
      rank        = 1
    
      finding_criteria {
        criterion {
          field  = "region"
          equals = ["eu-west-1"]
        }
    
        criterion {
          field      = "service.additionalInfo.threatListName"
          not_equals = ["some-threat", "another-threat"]
        }
    
        criterion {
          field        = "updatedAt"
          greater_than = "2020-01-01T00:00:00Z"
          less_than    = "2020-02-01T00:00:00Z"
        }
    
        criterion {
          field                 = "severity"
          greater_than_or_equal = "4"
        }
      }
    }
      `, Synth.yes);
    testCase.test("tricky to parse items", `
    provider "aws" {
      region                      = "us-east-1"
    }
    variable "tags" {
      type    = map
    }


    resource "aws_instance" "play" {
      ami                         = join("-", [var.tags.app, var.tags.env])
      instance_type               = "t3.small"
      key_name                    = aws_key_pair.master_key.id
      vpc_security_group_ids      = [aws_security_group.ssh.id]
      subnet_id                   = aws_subnet.main.id
      associate_public_ip_address = true
    
      connection {
        type        = "ssh"
        user        = "ubuntu"
        private_key = file("./terraform_key")
        host        = self.public_ip
      }
    }
      `, Synth.never);
    const targetLanguages = ["typescript", "python", "csharp", "java"];
    describe("Cross-Language Support", () => {
        it.each(targetLanguages)("supports %s", (language) => {
            const hcl = `
      resource "aws_kms_key" "examplekms" {
        description             = "KMS key 1"
        deletion_window_in_days = 7
      }
      
      resource "aws_s3_bucket" "examplebucket" {
        bucket = "examplebuckettftest"
        acl    = "private"
      }
      
      resource "aws_s3_bucket_object" "examplebucket_object" {
        key        = "someobject"
        bucket     = element(aws_s3_bucket.examplebucket, 0).id
        source     = "index.html"
        kms_key_id = aws_kms_key.examplekms.arn
      }
      `;
            expect(index_1.convert(hcl, {
                language: language,
                providerSchema: cachedProviderSchema,
            })).toMatchSnapshot();
        });
    });
    it("exposes stats for telemetry", async () => {
        const { stats } = await index_1.convert(`
  resource "aws_kms_key" "examplekms" {
    description             = "KMS key 1"
    deletion_window_in_days = 7
  }
  
  resource "aws_s3_bucket" "examplebucket" {
    bucket = "examplebuckettftest"
    acl    = "private"
  }
  resource "aws_s3_bucket" "examplebucket_two" {
    bucket = "examplebuckettftest"
    acl    = "private"
  }
  resource "aws_s3_bucket" "examplebucket_three" {
    bucket = "examplebuckettftest"
    acl    = "private"
  }

  resource "internal_cloud_s3_bucket" "examplebucket" {
    bucket = "examplebuckettftest"
    acl    = "private"
  }
  resource "internal_cloud_s3_bucket_object" "examplebucket_two" {
    bucket = "examplebuckettftest"
    acl    = "private"
  }
  
  resource "aws_s3_bucket_object" "examplebucket_object" {
    key        = "someobject"
    bucket     = element(aws_s3_bucket.examplebucket, 0).id
    source     = "index.html"
    kms_key_id = aws_kms_key.examplekms.arn
  }
  resource "aws_s3_bucket_object" "examplebucket_object_two" {
    key        = "someobject"
    bucket     = element(aws_s3_bucket.examplebucket, 0).id
    source     = "index.html"
    kms_key_id = aws_kms_key.examplekms.arn
  }
  resource "google_compute_autoscaler" "example" {
    name   = "example-autoscaler"
    zone   = "us-east1-b"
  
    autoscaling_policy = {
      max_replicas    = 8
      min_replicas    = 2
      cooldown_period = 60
  
      cpu_utilization = {
        target = 0.5
      }
    }
  }
  `, { language: "typescript", providerSchema: cachedProviderSchema });
        expect(stats).toMatchInlineSnapshot(`
      Object {
        "convertedLines": 55,
        "data": Object {},
        "language": "typescript",
        "numberOfModules": 0,
        "numberOfProviders": 3,
        "resources": Object {
          "aws": Object {
            "kms_key": 1,
            "s3_bucket": 3,
            "s3_bucket_object": 2,
          },
          "google": Object {
            "compute_autoscaler": 1,
          },
          "other": Object {
            "other": 1,
          },
        },
      }
    `);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGNsMmNkay50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaGNsMmNkay50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHdDQUF1QztBQUN2Qyx1Q0FBeUI7QUFDekIsMkNBQTZCO0FBQzdCLGtFQUttQztBQUNuQyxpREFBeUM7QUFDekMsTUFBTSxTQUFTLEdBQUc7SUFDaEIseUJBQXlCO0lBQ3pCLDhCQUE4QjtJQUM5Qiw0QkFBNEI7SUFDNUIseUJBQXlCO0lBQ3pCLDZCQUE2QjtJQUM3QiwwQkFBMEI7SUFDMUIsMkJBQTJCO0lBQzNCLDBCQUEwQjtJQUMxQixnQ0FBZ0M7Q0FDakMsQ0FBQztBQUVGLElBQUssS0FHSjtBQUhELFdBQUssS0FBSztJQUNSLCtCQUFHLENBQUE7SUFDSCxtQ0FBSyxDQUFBO0FBQ1AsQ0FBQyxFQUhJLEtBQUssS0FBTCxLQUFLLFFBR1Q7QUFFRCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSw4QkFBOEIsQ0FBQyxDQUFDO0FBQ3RFLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLGtCQUFrQixDQUFDLENBQUM7QUFFM0QsTUFBTSxjQUFjLEdBQ2xCLENBQUMsSUFBcUIsRUFBRSxFQUFFLENBQzFCLENBQUMsSUFBWSxFQUFFLEdBQVcsRUFBRSxXQUFrQixFQUFFLEVBQUU7SUFDaEQsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO1FBQ2IsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQyxDQUFDLENBQUM7UUFDOUIsT0FBTztLQUNSO0lBQ0QsUUFBUSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUU7UUFDbEIsSUFBSSxNQUFrQyxDQUFDO1FBQ3ZDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7WUFDYixNQUFNLEdBQUcsZUFBTyxDQUFDLEdBQUcsRUFBRTtnQkFDcEIs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QUMsZUFBZSxDQUFDLENBQUMsYUFBYSxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUU7WUFDbkQsTUFBTSxHQUFHLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7O09BaUJYLENBQUM7WUFDRixNQUFNLENBQ0osZUFBTyxDQUFDLEdBQUcsRUFBRTtnQkFDWCxRQUFRLEVBQUUsUUFBZTtnQkFDekIsY0FBYyxFQUFFLG9CQUFvQjthQUNyQyxDQUFDLENBQ0gsQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUN0QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDZCQUE2QixFQUFFLEtBQUssSUFBSSxFQUFFO1FBQzNDLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxNQUFNLGVBQU8sQ0FDN0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXNESCxFQUNHLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxjQUFjLEVBQUUsb0JBQW9CLEVBQUUsQ0FDakUsQ0FBQztRQUVGLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBcUJuQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29udmVydCB9IGZyb20gXCIuLi9saWIvaW5kZXhcIjtcbmltcG9ydCAqIGFzIGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHtcbiAgcmVhZFNjaGVtYSxcbiAgQ29uc3RydWN0c01ha2VyUHJvdmlkZXJUYXJnZXQsXG4gIExBTkdVQUdFUyxcbiAgY29uZmlnLFxufSBmcm9tIFwiQGNka3RmL3Byb3ZpZGVyLWdlbmVyYXRvclwiO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiY2hpbGRfcHJvY2Vzc1wiO1xuY29uc3QgcHJvdmlkZXJzID0gW1xuICBcImhhc2hpY29ycC9hd3NAIH4+My43NC4wXCIsXG4gIFwia3JldXp3ZXJrZXIvZG9ja2VyQCB+PjIuMTUuMFwiLFxuICBcImhhc2hpY29ycC9nb29nbGVAIH4+My44Ny4wXCIsXG4gIFwiaGFzaGljb3JwL251bGxAIH4+My4xLjBcIixcbiAgXCJoYXNoaWNvcnAvYXp1cmVhZEAgfj4yLjE3LjBcIixcbiAgXCJoYXNoaWNvcnAvbG9jYWxAIH4+Mi4xLjBcIixcbiAgXCJhbGV4a2FwcGEvYXV0aDBAIH4+MC4yNi4yXCIsXG4gIFwiRGF0YURvZy9kYXRhZG9nQCB+PjMuOC4xXCIsXG4gIFwiaGFzaGljb3JwL2t1YmVybmV0ZXNAIH4+Mi4xMS4wXCIsXG5dO1xuXG5lbnVtIFN5bnRoIHtcbiAgeWVzLFxuICBuZXZlciwgLy8gU29tZSBleGFtcGxlcyBhcmUgYnVpbHQgc28gdGhhdCB0aGV5IHdpbGwgbmV2ZXIgc3ludGggYnV0IHRlc3QgYSBzcGVjaWZpYyBnZW5lcmF0aW9uIGVkZ2UgY2FzZVxufVxuXG5jb25zdCBjZGt0ZkJpbiA9IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vLi4vY2RrdGYtY2xpL2Jpbi9jZGt0ZlwiKTtcbmNvbnN0IGNka3RmRGlzdCA9IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vLi4vLi4vZGlzdFwiKTtcblxuY29uc3QgY3JlYXRlVGVzdENhc2UgPVxuICAob3B0czogeyBza2lwPzogdHJ1ZSB9KSA9PlxuICAobmFtZTogc3RyaW5nLCBoY2w6IHN0cmluZywgc2hvdWxkU3ludGg6IFN5bnRoKSA9PiB7XG4gICAgaWYgKG9wdHMuc2tpcCkge1xuICAgICAgZGVzY3JpYmUuc2tpcChuYW1lLCAoKSA9PiB7fSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRlc2NyaWJlKG5hbWUsICgpID0+IHtcbiAgICAgIGxldCByZXN1bHQ6IFJldHVyblR5cGU8dHlwZW9mIGNvbnZlcnQ+O1xuICAgICAgYmVmb3JlQWxsKCgpID0+IHtcbiAgICAgICAgcmVzdWx0ID0gY29udmVydChoY2wsIHtcbiAgICAgICAgICBsYW5ndWFnZTogXCJ0eXBlc2NyaXB0XCIsXG4gICAgICAgICAgcHJvdmlkZXJTY2hlbWE6IGNhY2hlZFByb3ZpZGVyU2NoZW1hLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdChcInNuYXBzaG90XCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBhbGwgfSA9IGF3YWl0IHJlc3VsdDtcbiAgICAgICAgZXhwZWN0KGFsbCkudG9NYXRjaFNuYXBzaG90KCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHNob3VsZFN5bnRoID09PSBTeW50aC55ZXMpIHtcbiAgICAgICAgaXQoXCJwbGFuXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IG5hbWUucmVwbGFjZSgvXFxzL2csIFwiLVwiKTtcbiAgICAgICAgICBjb25zdCB7IGltcG9ydHMsIGNvZGUgfSA9IGF3YWl0IHJlc3VsdDtcbiAgICAgICAgICAvLyBIYXZlIGEgYmVmb3JlIGFsbCBzb21ld2hlcmUgYWJvdmUgYm9vdHN0cmFwIGEgVFMgcHJvamVjdFxuICAgICAgICAgIC8vIF9fZGlybmFtZSBzaG91bGQgYmUgcmVwbGFjZWVkIGJ5IHRoZSBib290c3RyYXBwZWQgZGlyZWN0b3J5XG4gICAgICAgICAgY29uc3QgcGF0aFRvVGhpc1Byb2plY3RzRmlsZSA9IHBhdGguam9pbihcbiAgICAgICAgICAgIHByb2plY3REaXIsXG4gICAgICAgICAgICBmaWxlbmFtZSArIFwiLnRzXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYFxuICAgICAgICBpbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tIFwiY29uc3RydWN0c1wiO1xuICAgICAgICBpbXBvcnQgeyBBcHAsIFRlcnJhZm9ybVN0YWNrIH0gZnJvbSBcImNka3RmXCI7XG4gICAgICAgICR7aW1wb3J0c31cblxuICAgICAgICBjbGFzcyBNeVN0YWNrIGV4dGVuZHMgVGVycmFmb3JtU3RhY2sge1xuICAgICAgICAgIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIG5hbWU6IHN0cmluZykge1xuICAgICAgICAgICAgc3VwZXIoc2NvcGUsIG5hbWUpO1xuXG4gICAgICAgICAgICAke2NvZGV9XG5cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhcHAgPSBuZXcgQXBwKCk7XG4gICAgICAgIG5ldyBNeVN0YWNrKGFwcCwgXCIke2ZpbGVuYW1lfVwiKTtcbiAgICAgICAgYXBwLnN5bnRoKCk7XG4gICAgICAgIGA7XG4gICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhwYXRoVG9UaGlzUHJvamVjdHNGaWxlLCBmaWxlQ29udGVudCwgXCJ1dGY4XCIpO1xuXG4gICAgICAgICAgY29uc3Qgc3Rkb3V0ID0gZXhlY1N5bmMoXG4gICAgICAgICAgICBgY2QgJHtwcm9qZWN0RGlyfSAmJiAke2Nka3RmQmlufSBzeW50aCAtYSAnbnB4IHRzLW5vZGUgJHtmaWxlbmFtZX0udHMnIC1vIC4vJHtmaWxlbmFtZX0tb3V0cHV0YFxuICAgICAgICAgICk7XG4gICAgICAgICAgZXhwZWN0KHN0ZG91dC50b1N0cmluZygpKS50b0VxdWFsKFxuICAgICAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoYEdlbmVyYXRlZCBUZXJyYWZvcm0gY29kZSBmb3IgdGhlIHN0YWNrc2ApXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5jb25zdCB0ZXN0Q2FzZSA9IHtcbiAgdGVzdDogY3JlYXRlVGVzdENhc2Uoe30pLFxuICBza2lwOiBjcmVhdGVUZXN0Q2FzZSh7IHNraXA6IHRydWUgfSksXG59O1xuXG5sZXQgY2FjaGVkUHJvdmlkZXJTY2hlbWE6IGFueTtcbmxldCBwcm9qZWN0RGlyOiBzdHJpbmc7XG5kZXNjcmliZShcImNvbnZlcnRcIiwgKCkgPT4ge1xuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgIC8vIEdldCBhbGwgdGhlIHByb3ZpZGVyIHNjaGVtYXNcbiAgICBjb25zdCBzY2hlbWFQcm9taXNlID0gcmVhZFNjaGVtYShcbiAgICAgIHByb3ZpZGVycy5tYXAoKHNwZWMpID0+XG4gICAgICAgIENvbnN0cnVjdHNNYWtlclByb3ZpZGVyVGFyZ2V0LmZyb20oXG4gICAgICAgICAgbmV3IGNvbmZpZy5UZXJyYWZvcm1Qcm92aWRlckNvbnN0cmFpbnQoc3BlYyksXG4gICAgICAgICAgTEFOR1VBR0VTWzBdXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhIG5ldyBwcm9qZWN0XG4gICAgcHJvamVjdERpciA9IGZzLm1rZHRlbXBTeW5jKFwiY2RrdGYtY29udmVydC10ZXN0XCIpO1xuICAgIGV4ZWNTeW5jKFxuICAgICAgYGNkICR7cHJvamVjdERpcn0gJiYgJHtjZGt0ZkJpbn0gaW5pdCAtLWxvY2FsIC0tZGlzdD0ke2Nka3RmRGlzdH0gLS1wcm9qZWN0LW5hbWU9XCJoZWxsb1wiIC0tcHJvamVjdC1kZXNjcmlwdGlvbj1cIndvcmxkXCIgLS10ZW1wbGF0ZT10eXBlc2NyaXB0IC0tZW5hYmxlLWNyYXNoLXJlcG9ydGluZz1mYWxzZWBcbiAgICApO1xuICAgIGNvbnN0IGNka3RmSnNvbiA9IEpTT04ucGFyc2UoXG4gICAgICBmcy5yZWFkRmlsZVN5bmMocGF0aC5qb2luKHByb2plY3REaXIsIFwiY2RrdGYuanNvblwiKSwgXCJ1dGY4XCIpXG4gICAgKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKFxuICAgICAgcGF0aC5qb2luKHByb2plY3REaXIsIFwiY2RrdGYuanNvblwiKSxcbiAgICAgIEpTT04uc3RyaW5naWZ5KFxuICAgICAgICB7XG4gICAgICAgICAgLi4uY2RrdGZKc29uLFxuICAgICAgICAgIHRlcnJhZm9ybVByb3ZpZGVyczogcHJvdmlkZXJzLFxuICAgICAgICAgIHRlcnJhZm9ybU1vZHVsZXM6IFtcInRlcnJhZm9ybS1hd3MtbW9kdWxlcy92cGMvYXdzQCB+PjMuMTEuNVwiXSxcbiAgICAgICAgfSxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgMlxuICAgICAgKVxuICAgICk7XG4gICAgZXhlY1N5bmMoYGNkICR7cHJvamVjdERpcn0gJiYgJHtjZGt0ZkJpbn0gZ2V0YCk7XG4gICAgY29uc3QgeyBwcm92aWRlclNjaGVtYSB9ID0gYXdhaXQgc2NoZW1hUHJvbWlzZTtcbiAgICBjYWNoZWRQcm92aWRlclNjaGVtYSA9IHByb3ZpZGVyU2NoZW1hO1xuICB9LCA1MDBfMDAwKTtcblxuICBhZnRlckFsbCgoKSA9PiB7XG4gICAgZnMucm1kaXJTeW5jKHByb2plY3REaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICB9KTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwib3V0cHV0XCIsXG4gICAgYFxuICAgICAgb3V0cHV0IFwiY2lkcl9vdXRcIiB7XG4gICAgICAgICAgdmFsdWUgPSBcInRlc3RcIlxuICAgICAgfWAsXG4gICAgU3ludGgueWVzXG4gICk7XG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJzZW5zaXRpdmUgb3V0cHV0XCIsXG4gICAgYFxuICAgICAgb3V0cHV0IFwiY2lkcl9vdXRcIiB7XG4gICAgICAgICAgdmFsdWUgPSBcInRlc3RcIlxuICAgICAgICAgIHNlbnNpdGl2ZSA9IHRydWVcbiAgICAgIH1gLFxuICAgIFN5bnRoLnllc1xuICApO1xuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwib3V0cHV0IHdpdGhkZXNjcmlwdGlvblwiLFxuICAgIGBcbiAgICAgIG91dHB1dCBcImNpZHJfb3V0XCIge1xuICAgICAgICAgIHZhbHVlID0gXCJ0ZXN0XCJcbiAgICAgICAgICBzZW5zaXRpdmUgPSB0cnVlXG4gICAgICAgICAgZGVzY3JpcHRpb24gPSBcIkJlc3Qgb3V0cHV0XCJcbiAgICAgIH1gLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJtdWx0aXBsZSBvdXRwdXRzXCIsXG4gICAgYFxuICAgICAgb3V0cHV0IFwiZmlyc3RfY2lkcl9vdXRcIiB7XG4gICAgICAgICAgdmFsdWUgPSBcImZpcnN0XCJcbiAgICAgIH1cbiAgICAgIG91dHB1dCBcInNlY29uZF9jaWRyX291dFwiIHtcbiAgICAgICAgICB2YWx1ZSA9IFwic2Vjb25kXCJcbiAgICAgIH1gLFxuICAgIFN5bnRoLnllc1xuICApO1xuICB0ZXN0Q2FzZS50ZXN0KFwiZW1wdHkgcHJvdmlkZXJcIiwgYHByb3ZpZGVyIFwiZG9ja2VyXCIge31gLCBTeW50aC55ZXMpO1xuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwibnVsbCBwcm92aWRlclwiLFxuICAgIGBwcm92aWRlciBcIm51bGxcIiB7fVxuICByZXNvdXJjZSBcIm51bGxfcmVzb3VyY2VcIiBcInRlc3RcIiB7fVxuICBgLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJwcm92aWRlciB3aXRoIGNvbXBsZXggY29uZmlnXCIsXG4gICAgYFxuICAgIHByb3ZpZGVyIFwiYXdzXCIge1xuICAgICAgYWNjZXNzX2tleSAgICAgICAgICAgICAgICAgID0gXCJtb2NrX2FjY2Vzc19rZXlcIlxuICAgICAgcmVnaW9uICAgICAgICAgICAgICAgICAgICAgID0gXCJ1cy1lYXN0LTFcIlxuICAgICAgc2VjcmV0X2tleSAgICAgICAgICAgICAgICAgID0gXCJtb2NrX3NlY3JldF9rZXlcIlxuICAgICAgc2tpcF9jcmVkZW50aWFsc192YWxpZGF0aW9uID0gdHJ1ZVxuICAgICAgc2tpcF9yZXF1ZXN0aW5nX2FjY291bnRfaWQgID0gdHJ1ZVxuICAgIFxuICAgICAgZW5kcG9pbnRzIHtcbiAgICAgICAgZHluYW1vZGIgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMFwiXG4gICAgICB9XG4gICAgfVxuICBgLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJzaW1wbGUgcmVzb3VyY2VcIixcbiAgICBgXG4gICAgcHJvdmlkZXIgXCJhd3NcIiB7XG4gICAgICByZWdpb24gICAgICAgICAgICAgICAgICAgICAgPSBcInVzLWVhc3QtMVwiXG4gICAgfVxuICAgIHJlc291cmNlIFwiYXdzX3ZwY1wiIFwiZXhhbXBsZVwiIHtcbiAgICAgIGNpZHJfYmxvY2sgPSBcIjEwLjAuMC4wLzE2XCJcbiAgICB9YCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwiY29tcGxleCByZXNvdXJjZVwiLFxuICAgIGAgXG4gICAgcHJvdmlkZXIgXCJhd3NcIiB7XG4gICAgICByZWdpb24gICAgICAgICAgICAgICAgICAgICAgPSBcInVzLWVhc3QtMVwiXG4gICAgfVxuICAgIHJlc291cmNlIFwiYXdzX2Nsb3VkZnJvbnRfZGlzdHJpYnV0aW9uXCIgXCJzM19kaXN0cmlidXRpb25cIiB7XG4gICAgICBvcmlnaW4ge1xuICAgICAgICBkb21haW5fbmFtZSA9IFwiYXdzX3MzX2J1Y2tldC5iLmJ1Y2tldF9yZWdpb25hbF9kb21haW5fbmFtZVwiXG4gICAgICAgIG9yaWdpbl9pZCAgID0gXCJsb2NhbF9zM19vcmlnaW5faWRcIlxuICAgIFxuICAgICAgICBzM19vcmlnaW5fY29uZmlnIHtcbiAgICAgICAgICBvcmlnaW5fYWNjZXNzX2lkZW50aXR5ID0gXCJvcmlnaW4tYWNjZXNzLWlkZW50aXR5L2Nsb3VkZnJvbnQvQUJDREVGRzEyMzQ1NjdcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgXG4gICAgICBlbmFibGVkICAgICAgICAgICAgID0gdHJ1ZVxuICAgICAgaXNfaXB2Nl9lbmFibGVkICAgICA9IHRydWVcbiAgICAgIGNvbW1lbnQgICAgICAgICAgICAgPSBcIlNvbWUgY29tbWVudFwiXG4gICAgICBkZWZhdWx0X3Jvb3Rfb2JqZWN0ID0gXCJpbmRleC5odG1sXCJcbiAgICBcbiAgICAgIGxvZ2dpbmdfY29uZmlnIHtcbiAgICAgICAgaW5jbHVkZV9jb29raWVzID0gZmFsc2VcbiAgICAgICAgYnVja2V0ICAgICAgICAgID0gXCJteWxvZ3MuczMuYW1hem9uYXdzLmNvbVwiXG4gICAgICAgIHByZWZpeCAgICAgICAgICA9IFwibXlwcmVmaXhcIlxuICAgICAgfVxuICAgIFxuICAgICAgYWxpYXNlcyA9IFtcIm15c2l0ZS5leGFtcGxlLmNvbVwiLCBcInlvdXJzaXRlLmV4YW1wbGUuY29tXCJdXG4gICAgXG4gICAgICBkZWZhdWx0X2NhY2hlX2JlaGF2aW9yIHtcbiAgICAgICAgYWxsb3dlZF9tZXRob2RzICA9IFtcIkRFTEVURVwiLCBcIkdFVFwiLCBcIkhFQURcIiwgXCJPUFRJT05TXCIsIFwiUEFUQ0hcIiwgXCJQT1NUXCIsIFwiUFVUXCJdXG4gICAgICAgIGNhY2hlZF9tZXRob2RzICAgPSBbXCJHRVRcIiwgXCJIRUFEXCJdXG4gICAgICAgIHRhcmdldF9vcmlnaW5faWQgPSBcImxvY2FsX3MzX29yaWdpbl9pZFwiXG4gICAgXG4gICAgICAgIGZvcndhcmRlZF92YWx1ZXMge1xuICAgICAgICAgIHF1ZXJ5X3N0cmluZyA9IGZhbHNlXG4gICAgXG4gICAgICAgICAgY29va2llcyB7XG4gICAgICAgICAgICBmb3J3YXJkID0gXCJub25lXCJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgdmlld2VyX3Byb3RvY29sX3BvbGljeSA9IFwiYWxsb3ctYWxsXCJcbiAgICAgICAgbWluX3R0bCAgICAgICAgICAgICAgICA9IDBcbiAgICAgICAgZGVmYXVsdF90dGwgICAgICAgICAgICA9IDM2MDBcbiAgICAgICAgbWF4X3R0bCAgICAgICAgICAgICAgICA9IDg2NDAwXG4gICAgICB9XG4gICAgXG4gICAgICAjIENhY2hlIGJlaGF2aW9yIHdpdGggcHJlY2VkZW5jZSAwXG4gICAgICBvcmRlcmVkX2NhY2hlX2JlaGF2aW9yIHtcbiAgICAgICAgcGF0aF9wYXR0ZXJuICAgICA9IFwiL2NvbnRlbnQvaW1tdXRhYmxlLypcIlxuICAgICAgICBhbGxvd2VkX21ldGhvZHMgID0gW1wiR0VUXCIsIFwiSEVBRFwiLCBcIk9QVElPTlNcIl1cbiAgICAgICAgY2FjaGVkX21ldGhvZHMgICA9IFtcIkdFVFwiLCBcIkhFQURcIiwgXCJPUFRJT05TXCJdXG4gICAgICAgIHRhcmdldF9vcmlnaW5faWQgPSBcImxvY2FsX3MzX29yaWdpbl9pZFwiXG4gICAgXG4gICAgICAgIGZvcndhcmRlZF92YWx1ZXMge1xuICAgICAgICAgIHF1ZXJ5X3N0cmluZyA9IGZhbHNlXG4gICAgICAgICAgaGVhZGVycyAgICAgID0gW1wiT3JpZ2luXCJdXG4gICAgXG4gICAgICAgICAgY29va2llcyB7XG4gICAgICAgICAgICBmb3J3YXJkID0gXCJub25lXCJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgbWluX3R0bCAgICAgICAgICAgICAgICA9IDBcbiAgICAgICAgZGVmYXVsdF90dGwgICAgICAgICAgICA9IDg2NDAwXG4gICAgICAgIG1heF90dGwgICAgICAgICAgICAgICAgPSAzMTUzNjAwMFxuICAgICAgICBjb21wcmVzcyAgICAgICAgICAgICAgID0gdHJ1ZVxuICAgICAgICB2aWV3ZXJfcHJvdG9jb2xfcG9saWN5ID0gXCJyZWRpcmVjdC10by1odHRwc1wiXG4gICAgICB9XG4gICAgXG4gICAgICAjIENhY2hlIGJlaGF2aW9yIHdpdGggcHJlY2VkZW5jZSAxXG4gICAgICBvcmRlcmVkX2NhY2hlX2JlaGF2aW9yIHtcbiAgICAgICAgcGF0aF9wYXR0ZXJuICAgICA9IFwiL2NvbnRlbnQvKlwiXG4gICAgICAgIGFsbG93ZWRfbWV0aG9kcyAgPSBbXCJHRVRcIiwgXCJIRUFEXCIsIFwiT1BUSU9OU1wiXVxuICAgICAgICBjYWNoZWRfbWV0aG9kcyAgID0gW1wiR0VUXCIsIFwiSEVBRFwiXVxuICAgICAgICB0YXJnZXRfb3JpZ2luX2lkID0gXCJsb2NhbF9zM19vcmlnaW5faWRcIlxuICAgIFxuICAgICAgICBmb3J3YXJkZWRfdmFsdWVzIHtcbiAgICAgICAgICBxdWVyeV9zdHJpbmcgPSBmYWxzZVxuICAgIFxuICAgICAgICAgIGNvb2tpZXMge1xuICAgICAgICAgICAgZm9yd2FyZCA9IFwibm9uZVwiXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIG1pbl90dGwgICAgICAgICAgICAgICAgPSAwXG4gICAgICAgIGRlZmF1bHRfdHRsICAgICAgICAgICAgPSAzNjAwXG4gICAgICAgIG1heF90dGwgICAgICAgICAgICAgICAgPSA4NjQwMFxuICAgICAgICBjb21wcmVzcyAgICAgICAgICAgICAgID0gdHJ1ZVxuICAgICAgICB2aWV3ZXJfcHJvdG9jb2xfcG9saWN5ID0gXCJyZWRpcmVjdC10by1odHRwc1wiXG4gICAgICB9XG4gICAgXG4gICAgICBwcmljZV9jbGFzcyA9IFwiUHJpY2VDbGFzc18yMDBcIlxuICAgIFxuICAgICAgcmVzdHJpY3Rpb25zIHtcbiAgICAgICAgZ2VvX3Jlc3RyaWN0aW9uIHtcbiAgICAgICAgICByZXN0cmljdGlvbl90eXBlID0gXCJ3aGl0ZWxpc3RcIlxuICAgICAgICAgIGxvY2F0aW9ucyAgICAgICAgPSBbXCJVU1wiLCBcIkNBXCIsIFwiR0JcIiwgXCJERVwiXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgXG4gICAgICB0YWdzID0ge1xuICAgICAgICBFbnZpcm9ubWVudCA9IFwicHJvZHVjdGlvblwiXG4gICAgICB9XG4gICAgXG4gICAgICB2aWV3ZXJfY2VydGlmaWNhdGUge1xuICAgICAgICBjbG91ZGZyb250X2RlZmF1bHRfY2VydGlmaWNhdGUgPSB0cnVlXG4gICAgICB9XG4gICAgfWAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcInNpbXBsZSBkYXRhIHNvdXJjZVwiLFxuICAgIGBcbiAgICBwcm92aWRlciBcImF3c1wiIHtcbiAgICAgIHJlZ2lvbiAgICAgICAgICAgICAgICAgICAgICA9IFwidXMtZWFzdC0xXCJcbiAgICB9XG4gICAgZGF0YSBcImF3c19zdWJuZXRcIiBcInNlbGVjdGVkXCIge1xuICAgICAgdnBjX2lkID0gXCJzdWJuZXRfaWRcIlxuICAgIH1gLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJsb2NhbHNcIixcbiAgICBgXG4gICAgbG9jYWxzIHtcbiAgICAgIHNlcnZpY2VfbmFtZSA9IFwiZm9ydW1cIlxuICAgICAgb3duZXIgICAgICAgID0gXCJDb21tdW5pdHkgVGVhbVwiXG4gICAgICBpc19pdF9ncmVhdCAgPSB0cnVlXG4gICAgICBob3dfbWFueSAgICAgPSA0MlxuICAgIH1cbiAgICBvdXRwdXQgXCJjb21iaW5lZC1zby1pdC1kb2VzLW5vdC1nZXQtcmVtb3ZlZFwiIHtcbiAgICAgIHZhbHVlID0gXCJcXCR7bG9jYWwuc2VydmljZV9uYW1lfSxcXCR7bG9jYWwub3duZXJ9LFxcJHtsb2NhbC5pc19pdF9ncmVhdH0sXFwke2xvY2FsLmhvd19tYW55fVwiXG4gICAgfVxuICAgIGAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcIm11bHRpcGxlIGxvY2FscyBibG9ja3NcIixcbiAgICBgXG4gICAgbG9jYWxzIHtcbiAgICAgIHNlcnZpY2VfbmFtZSA9IFwiZm9ydW1cIlxuICAgICAgb3duZXIgICAgICAgID0gXCJDb21tdW5pdHkgVGVhbVwiXG4gICAgfVxuXG4gICAgbG9jYWxzIHtcbiAgICAgIGlzX2l0X2dyZWF0ICA9IHRydWVcbiAgICAgIGhvd19tYW55ICAgICA9IDQyXG4gICAgfVxuICAgIFxuICAgIG91dHB1dCBcImNvbWJpbmVkLXNvLWl0LWRvZXMtbm90LWdldC1yZW1vdmVkXCIge1xuICAgICAgdmFsdWUgPSBcIlxcJHtsb2NhbC5zZXJ2aWNlX25hbWV9LFxcJHtsb2NhbC5vd25lcn0sXFwke2xvY2FsLmlzX2l0X2dyZWF0fSxcXCR7bG9jYWwuaG93X21hbnl9XCJcbiAgICB9YCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwicmVzb3VyY2UgcmVmZXJlbmNlc1wiLFxuICAgIGBcbiAgICBwcm92aWRlciBcImF3c1wiIHtcbiAgICAgIHJlZ2lvbiAgICAgICAgICAgICAgICAgICAgICA9IFwidXMtZWFzdC0xXCJcbiAgICB9XG4gICAgcmVzb3VyY2UgXCJhd3Nfa21zX2tleVwiIFwiZXhhbXBsZWttc1wiIHtcbiAgICAgIGRlc2NyaXB0aW9uICAgICAgICAgICAgID0gXCJLTVMga2V5IDFcIlxuICAgICAgZGVsZXRpb25fd2luZG93X2luX2RheXMgPSA3XG4gICAgfVxuICAgIFxuICAgIHJlc291cmNlIFwiYXdzX3MzX2J1Y2tldFwiIFwiZXhhbXBsZWJ1Y2tldFwiIHtcbiAgICAgIGJ1Y2tldCA9IFwiZXhhbXBsZWJ1Y2tldHRmdGVzdFwiXG4gICAgICBhY2wgICAgPSBcInByaXZhdGVcIlxuICAgIH1cbiAgICBcbiAgICByZXNvdXJjZSBcImF3c19zM19idWNrZXRfb2JqZWN0XCIgXCJleGFtcGxlYnVja2V0X29iamVjdFwiIHtcbiAgICAgIGtleSAgICAgICAgPSBcInNvbWVvYmplY3RcIlxuICAgICAgYnVja2V0ICAgICA9IGF3c19zM19idWNrZXQuZXhhbXBsZWJ1Y2tldC5pZFxuICAgICAgc291cmNlICAgICA9IFwiaW5kZXguaHRtbFwiXG4gICAgICBrbXNfa2V5X2lkID0gYXdzX2ttc19rZXkuZXhhbXBsZWttcy5hcm5cbiAgICB9YCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwibG9jYWxzIHJlZmVyZW5jZXNcIixcbiAgICBgXG4gICAgcHJvdmlkZXIgXCJhd3NcIiB7XG4gICAgICByZWdpb24gICAgICAgICAgICAgICAgICAgICAgPSBcInVzLWVhc3QtMVwiXG4gICAgfVxuXG4gICAgbG9jYWxzIHtcbiAgICAgIGJ1Y2tldF9uYW1lID0gXCJmb29cIlxuICAgIH1cbiAgICBcbiAgICByZXNvdXJjZSBcImF3c19zM19idWNrZXRcIiBcImV4YW1wbGVidWNrZXRcIiB7XG4gICAgICBidWNrZXQgPSBsb2NhbC5idWNrZXRfbmFtZVxuICAgICAgYWNsICAgID0gXCJwcml2YXRlXCJcbiAgICB9YCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwidmFyaWFibGUgcmVmZXJlbmNlc1wiLFxuICAgIGBcbiAgICBwcm92aWRlciBcImF3c1wiIHtcbiAgICAgIHJlZ2lvbiAgICAgICAgICAgICAgICAgICAgICA9IFwidXMtZWFzdC0xXCJcbiAgICB9XG4gICAgdmFyaWFibGUgXCJidWNrZXRfbmFtZVwiIHtcbiAgICAgIHR5cGUgICAgPSBzdHJpbmdcbiAgICAgIGRlZmF1bHQgPSBcImRlbW9cIlxuICAgIH1cbiAgICBcbiAgICByZXNvdXJjZSBcImF3c19zM19idWNrZXRcIiBcImV4YW1wbGVidWNrZXRcIiB7XG4gICAgICBidWNrZXQgPSB2YXIuYnVja2V0X25hbWVcbiAgICAgIGFjbCAgICA9IFwicHJpdmF0ZVwiXG4gICAgfWAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcImRhdGEgcmVmZXJlbmNlc1wiLFxuICAgIGBcbiAgICBwcm92aWRlciBcImF3c1wiIHtcbiAgICAgIHJlZ2lvbiAgICAgICAgICAgICAgICAgICAgICA9IFwidXMtZWFzdC0xXCJcbiAgICB9XG4gICAgdmFyaWFibGUgXCJidWNrZXRfbmFtZVwiIHtcbiAgICAgIHR5cGUgICAgPSBzdHJpbmdcbiAgICAgIGRlZmF1bHQgPSBcImRlbW9cIlxuICAgIH1cbiAgICBcbiAgICBkYXRhIFwiYXdzX3MzX2J1Y2tldFwiIFwiZXhhbXBsZWJ1Y2tldFwiIHtcbiAgICAgIGJ1Y2tldCA9IHZhci5idWNrZXRfbmFtZVxuICAgIH1cbiAgICBcbiAgICByZXNvdXJjZSBcImF3c19zM19idWNrZXRfb2JqZWN0XCIgXCJleGFtcGxlYnVja2V0X29iamVjdFwiIHtcbiAgICAgIGtleSAgICAgICAgPSBcInNvbWVvYmplY3RcIlxuICAgICAgYnVja2V0ICAgICA9IGRhdGEuYXdzX3MzX2J1Y2tldC5leGFtcGxlYnVja2V0LmFyblxuICAgICAgc291cmNlICAgICA9IFwiaW5kZXguaHRtbFwiXG4gICAgfWAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcImRvdWJsZSByZWZlcmVuY2VzXCIsXG4gICAgYFxuICAgIHByb3ZpZGVyIFwiYXdzXCIge1xuICAgICAgcmVnaW9uICAgICAgICAgICAgICAgICAgICAgID0gXCJ1cy1lYXN0LTFcIlxuICAgIH1cbiAgICB2YXJpYWJsZSBcImJ1Y2tldF9uYW1lXCIge1xuICAgICAgdHlwZSAgICA9IHN0cmluZ1xuICAgICAgZGVmYXVsdCA9IFwiZGVtb1wiXG4gICAgfVxuICAgIFxuICAgIHJlc291cmNlIFwiYXdzX3MzX2J1Y2tldFwiIFwiZXhhbXBsZWJ1Y2tldFwiIHtcbiAgICAgIGJ1Y2tldCA9IHZhci5idWNrZXRfbmFtZVxuICAgICAgYWNsICAgID0gXCJwcml2YXRlXCJcbiAgICAgIHRhZ3MgPSB7XG4gICAgICAgIHRhZy1rZXkgPSB2YXIuYnVja2V0X25hbWVcbiAgICAgIH1cbiAgICB9YCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwibW9kdWxlc1wiLFxuICAgIGBcbiAgICBtb2R1bGUgXCJ2cGNcIiB7XG4gICAgICBzb3VyY2UgPSBcInRlcnJhZm9ybS1hd3MtbW9kdWxlcy92cGMvYXdzXCJcbiAgICBcbiAgICAgIG5hbWUgPSBcIm15LXZwY1wiXG4gICAgICBjaWRyID0gXCIxMC4wLjAuMC8xNlwiXG4gICAgXG4gICAgICBhenMgICAgICAgICAgICAgPSBbXCJldS13ZXN0LTFhXCIsIFwiZXUtd2VzdC0xYlwiLCBcImV1LXdlc3QtMWNcIl1cbiAgICAgIHByaXZhdGVfc3VibmV0cyA9IFtcIjEwLjAuMS4wLzI0XCIsIFwiMTAuMC4yLjAvMjRcIiwgXCIxMC4wLjMuMC8yNFwiXVxuICAgICAgcHVibGljX3N1Ym5ldHMgID0gW1wiMTAuMC4xMDEuMC8yNFwiLCBcIjEwLjAuMTAyLjAvMjRcIiwgXCIxMC4wLjEwMy4wLzI0XCJdXG4gICAgXG4gICAgICBlbmFibGVfbmF0X2dhdGV3YXkgPSB0cnVlXG4gICAgICBlbmFibGVfdnBuX2dhdGV3YXkgPSB0cnVlXG4gICAgXG4gICAgICB0YWdzID0ge1xuICAgICAgICBUZXJyYWZvcm0gPSBcInRydWVcIlxuICAgICAgICBFbnZpcm9ubWVudCA9IFwiZGV2XCJcbiAgICAgIH1cbiAgICB9YCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwiZHVwbGljYXRlIG1vZHVsZXNcIixcbiAgICBgXG4gICAgbW9kdWxlIFwidnBjYVwiIHtcbiAgICAgIHNvdXJjZSA9IFwidGVycmFmb3JtLWF3cy1tb2R1bGVzL3ZwYy9hd3NcIlxuICAgIFxuICAgICAgbmFtZSA9IFwibXktdnBjLWFcIlxuICAgIH1cbiAgICBcbiAgICBtb2R1bGUgXCJ2cGNiXCIge1xuICAgICAgc291cmNlID0gXCJ0ZXJyYWZvcm0tYXdzLW1vZHVsZXMvdnBjL2F3c1wiXG4gICAgXG4gICAgICBuYW1lID0gXCJteS12cGMtYlwiXG4gICAgfWAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcInJlZmVyZW5jZWQgbW9kdWxlc1wiLFxuICAgIGBcbiAgICAgIG1vZHVsZSBcInZwY1wiIHtcbiAgICAgICAgc291cmNlID0gXCJ0ZXJyYWZvcm0tYXdzLW1vZHVsZXMvdnBjL2F3c1wiXG4gICAgICBcbiAgICAgICAgbmFtZSA9IFwibXktdnBjXCJcbiAgICAgICAgY2lkciA9IFwiMTAuMC4wLjAvMTZcIlxuICAgICAgXG4gICAgICAgIGF6cyAgICAgICAgICAgICA9IFtcImV1LXdlc3QtMWFcIiwgXCJldS13ZXN0LTFiXCIsIFwiZXUtd2VzdC0xY1wiXVxuICAgICAgICBwcml2YXRlX3N1Ym5ldHMgPSBbXCIxMC4wLjEuMC8yNFwiLCBcIjEwLjAuMi4wLzI0XCIsIFwiMTAuMC4zLjAvMjRcIl1cbiAgICAgICAgcHVibGljX3N1Ym5ldHMgID0gW1wiMTAuMC4xMDEuMC8yNFwiLCBcIjEwLjAuMTAyLjAvMjRcIiwgXCIxMC4wLjEwMy4wLzI0XCJdXG4gICAgICBcbiAgICAgICAgZW5hYmxlX25hdF9nYXRld2F5ID0gdHJ1ZVxuICAgICAgICBlbmFibGVfdnBuX2dhdGV3YXkgPSB0cnVlXG4gICAgICBcbiAgICAgICAgdGFncyA9IHtcbiAgICAgICAgICBUZXJyYWZvcm0gPSBcInRydWVcIlxuICAgICAgICAgIEVudmlyb25tZW50ID0gXCJkZXZcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIG91dHB1dCBcInN1Ym5ldF9pZHNcIiB7XG4gICAgICAgIHZhbHVlID0gbW9kdWxlLnZwYy5wdWJsaWNfc3VibmV0c1xuICAgICAgfWAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcImFyaXRobWV0aWNzXCIsXG4gICAgYFxuICAgICAgdmFyaWFibGUgXCJtZW1iZXJzXCIge1xuICAgICAgICB0eXBlID0gbnVtYmVyXG4gICAgICB9XG4gICAgICB2YXJpYWJsZSBcImFkbWluc1wiIHtcbiAgICAgICAgdHlwZSA9IG51bWJlclxuICAgICAgfVxuICAgICAgXG4gICAgICBvdXRwdXQgXCJhcml0aG1ldGljc1wiIHtcbiAgICAgICAgdmFsdWUgPSB2YXIubWVtYmVycyArIHZhci5hZG1pbnNcbiAgICAgIH1gLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJjb25kaXRpb25hbHNcIixcbiAgICBgXG4gICAgICAgIHByb3ZpZGVyIFwiYXdzXCIge1xuICAgICAgICAgIHJlZ2lvbiAgICAgICAgICAgICAgICAgICAgICA9IFwidXMtZWFzdC0xXCJcbiAgICAgICAgfVxuICAgICAgICByZXNvdXJjZSBcImF3c19rbXNfa2V5XCIgXCJleGFtcGxla21zXCIge1xuICAgICAgICAgIGRlc2NyaXB0aW9uICAgICAgICAgICAgID0gXCJLTVMga2V5IDFcIlxuICAgICAgICAgIGRlbGV0aW9uX3dpbmRvd19pbl9kYXlzID0gN1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXNvdXJjZSBcImF3c19zM19idWNrZXRcIiBcImV4YW1wbGVidWNrZXRcIiB7XG4gICAgICAgICAgYnVja2V0ID0gXCJleGFtcGxlYnVja2V0dGZ0ZXN0XCJcbiAgICAgICAgICBhY2wgICAgPSBcInByaXZhdGVcIlxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXNvdXJjZSBcImF3c19zM19idWNrZXRfb2JqZWN0XCIgXCJleGFtcGxlYnVja2V0X29iamVjdFwiIHtcbiAgICAgICAgICBrZXkgICAgICAgID0gXCJzb21lb2JqZWN0XCJcbiAgICAgICAgICBidWNrZXQgICAgID0gYXdzX2ttc19rZXkuZXhhbXBsZWttcy5kZWxldGlvbl93aW5kb3dfaW5fZGF5cyA+IDMgPyBhd3NfczNfYnVja2V0LmV4YW1wbGVidWNrZXQuaWQgOiBbXVxuICAgICAgICAgIHNvdXJjZSAgICAgPSBcImluZGV4Lmh0bWxcIlxuICAgICAgICAgIGttc19rZXlfaWQgPSBhd3Nfa21zX2tleS5leGFtcGxla21zLmFyblxuICAgICAgICB9YCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwiZm9yIGV4cHJlc3Npb24gMVwiLFxuICAgIGBcbiAgICAgICAgdmFyaWFibGUgXCJ1c2Vyc1wiIHtcbiAgICAgICAgICB0eXBlID0gbWFwKG9iamVjdCh7XG4gICAgICAgICAgICBpc19hZG1pbiA9IGJvb2xlYW5cbiAgICAgICAgICB9KSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbG9jYWxzIHtcbiAgICAgICAgICBhZG1pbl91c2VycyA9IHtcbiAgICAgICAgICAgIGZvciBuYW1lLCB1c2VyIGluIHZhci51c2VycyA6IG5hbWUgPT4gdXNlclxuICAgICAgICAgICAgaWYgdXNlci5pc19hZG1pblxuICAgICAgICAgIH1cbiAgICAgICAgICByZWd1bGFyX3VzZXJzID0ge1xuICAgICAgICAgICAgZm9yIG5hbWUsIHVzZXIgaW4gdmFyLnVzZXJzIDogbmFtZSA9PiB1c2VyXG4gICAgICAgICAgICBpZiAhdXNlci5pc19hZG1pblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgb3V0cHV0IFwiY29tYmluZWQtc28taXQtZG9lcy1ub3QtZ2V0LXJlbW92ZWRcIiB7XG4gICAgICAgICAgdmFsdWUgPSBcIlxcJHtsb2NhbC5hZG1pbl91c2Vyc30sXFwke2xvY2FsLnJlZ3VsYXJfdXNlcnN9XCJcbiAgICAgICAgfVxuICAgICAgICBgLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJmb3IgZXhwcmVzc2lvbiAyXCIsXG4gICAgYFxuICAgICAgdmFyaWFibGUgXCJ1c2Vyc1wiIHtcbiAgICAgICAgdHlwZSA9IG1hcChvYmplY3Qoe1xuICAgICAgICAgIHJvbGUgPSBzdHJpbmdcbiAgICAgICAgfSkpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGxvY2FscyB7XG4gICAgICAgIHVzZXJzX2J5X3JvbGUgPSB7XG4gICAgICAgICAgZm9yIG5hbWUsIHVzZXIgaW4gdmFyLnVzZXJzIDogdXNlci5yb2xlID0+IG5hbWUuLi5cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBvdXRwdXQgXCJzby1pdC1kb2VzLW5vdC1nZXQtcmVtb3ZlZFwiIHtcbiAgICAgICAgdmFsdWUgPSBsb2NhbC51c2Vyc19ieV9yb2xlXG4gICAgICB9YCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwiZm9yIGV4cHJlc3Npb24gM1wiLFxuICAgIGBcbiAgICAgICAgcHJvdmlkZXIgXCJkYXRhZG9nXCIge1xuICAgICAgICAgIGFwaV9rZXkgPSBcImFwaV9rZXlcIlxuICAgICAgICAgIGFwcF9rZXkgPSBcImFwcF9rZXlcIlxuICAgICAgICB9XG5cbiAgICAgICAgdmFyaWFibGUgXCJ1c2Vyc1wiIHtcbiAgICAgICAgICB0eXBlID0gbGlzdChvYmplY3Qoe1xuICAgICAgICAgICAgaWQgPSBzdHJpbmdcbiAgICAgICAgICB9KSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmVzb3VyY2UgXCJkYXRhZG9nX21vbml0b3JcIiBcImhhcmRfcXVlcnlcIiB7XG4gICAgICAgICAgbmFtZSAgICA9IFwicXVlcmllcyBhcmUgaGFyZFwiXG4gICAgICAgICAgbWVzc2FnZSA9IFwiaGVyZSB3ZSBnb1wiXG4gICAgICAgICAgcXVlcnkgICA9IGpvaW4oXCIgJiYgXCIsIFtmb3IgbyBpbiB2YXIudXNlcnMgOiBcIiEoIVxcJHtvLmlkfSlcIl0pXG4gICAgICAgICAgdHlwZSAgICA9IFwibWV0cmljIGFsZXJ0XCJcbiAgICAgICAgfWAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcInJlc291cmNlIHJlZmVyZW5jZXMgd2l0aCBIQ0wgZnVuY3Rpb25zXCIsXG4gICAgYFxuICAgICAgcHJvdmlkZXIgXCJhd3NcIiB7XG4gICAgICAgIHJlZ2lvbiAgICAgICAgICAgICAgICAgICAgICA9IFwidXMtZWFzdC0xXCJcbiAgICAgIH1cbiAgICAgIHJlc291cmNlIFwiYXdzX2ttc19rZXlcIiBcImV4YW1wbGVrbXNcIiB7XG4gICAgICAgIGRlc2NyaXB0aW9uICAgICAgICAgICAgID0gXCJLTVMga2V5IDFcIlxuICAgICAgICBkZWxldGlvbl93aW5kb3dfaW5fZGF5cyA9IDdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmVzb3VyY2UgXCJhd3NfczNfYnVja2V0XCIgXCJleGFtcGxlYnVja2V0XCIge1xuICAgICAgICBidWNrZXQgPSBcImV4YW1wbGVidWNrZXR0ZnRlc3RcIlxuICAgICAgICBhY2wgICAgPSBcInByaXZhdGVcIlxuICAgICAgfVxuICAgICAgXG4gICAgICByZXNvdXJjZSBcImF3c19zM19idWNrZXRfb2JqZWN0XCIgXCJleGFtcGxlYnVja2V0X29iamVjdFwiIHtcbiAgICAgICAga2V5ICAgICAgICA9IFwic29tZW9iamVjdFwiXG4gICAgICAgIGJ1Y2tldCAgICAgPSBlbGVtZW50KGF3c19zM19idWNrZXQuZXhhbXBsZWJ1Y2tldCwgMCkuaWRcbiAgICAgICAgc291cmNlICAgICA9IFwiaW5kZXguaHRtbFwiXG4gICAgICAgIGttc19rZXlfaWQgPSBhd3Nfa21zX2tleS5leGFtcGxla21zLmFyblxuICAgICAgfWAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcImZvciBlYWNoIG9uIGxpc3QgdXNpbmcgc3BsYXRcIixcbiAgICBgXG4gICAgICBwcm92aWRlciBcImF3c1wiIHtcbiAgICAgICAgcmVnaW9uICAgICAgICAgICAgICAgICAgICAgID0gXCJ1cy1lYXN0LTFcIlxuICAgICAgfVxuICAgICAgdmFyaWFibGUgXCJidWNrZXRzXCIge1xuICAgICAgICB0eXBlICAgID0gbGlzdChzdHJpbmcpXG4gICAgICB9XG5cbiAgICAgIHJlc291cmNlIFwiYXdzX2ttc19rZXlcIiBcImV4YW1wbGVrbXNcIiB7XG4gICAgICAgIGRlc2NyaXB0aW9uICAgICAgICAgICAgID0gXCJLTVMga2V5IDFcIlxuICAgICAgICBkZWxldGlvbl93aW5kb3dfaW5fZGF5cyA9IDdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmVzb3VyY2UgXCJhd3NfczNfYnVja2V0XCIgXCJleGFtcGxlYnVja2V0XCIge1xuICAgICAgICBmb3JfZWFjaCA9IHRvc2V0KHZhci5idWNrZXRzLiopXG5cbiAgICAgICAgYnVja2V0ID0gZWFjaC5rZXlcbiAgICAgICAgYWNsICAgID0gXCJwcml2YXRlXCJcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmVzb3VyY2UgXCJhd3NfczNfYnVja2V0X29iamVjdFwiIFwiZXhhbXBsZWJ1Y2tldF9vYmplY3RcIiB7XG4gICAgICAgIGZvcl9lYWNoID0gdG9zZXQoYXdzX3MzX2J1Y2tldC5leGFtcGxlYnVja2V0LiopXG5cbiAgICAgICAga2V5ICAgICAgICA9IFwic29tZW9iamVjdFwiXG4gICAgICAgIGJ1Y2tldCAgICAgPSBlYWNoLmtleVxuICAgICAgICBzb3VyY2UgICAgID0gXCJpbmRleC5odG1sXCJcbiAgICAgICAga21zX2tleV9pZCA9IGF3c19rbXNfa2V5LmV4YW1wbGVrbXMuYXJuXG4gICAgICB9XG4gICAgICBgLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJmb3JfZWFjaCBsb29wc1wiLFxuICAgIGBcbiAgICBwcm92aWRlciBcImF3c1wiIHtcbiAgICAgIHJlZ2lvbiAgICAgICAgICAgICAgICAgICAgICA9IFwidXMtZWFzdC0xXCJcbiAgICB9XG4gICAgICB2YXJpYWJsZSBcInVzZXJzXCIge1xuICAgICAgICB0eXBlID0gc2V0KHN0cmluZylcbiAgICAgIH1cblxuICAgICAgcmVzb3VyY2UgXCJhd3NfaWFtX3VzZXJcIiBcImxiXCIge1xuICAgICAgICBmb3JfZWFjaCA9IHZhci51c2Vyc1xuICAgICAgICBuYW1lID0gZWFjaC5rZXlcbiAgICAgICAgcGF0aCA9IFwiL3N5c3RlbS9cIlxuICAgICAgXG4gICAgICAgIHRhZ3MgPSB7XG4gICAgICAgICAgdGFnLWtleSA9IFwidGFnLXZhbHVlXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwicHJvcGVydHkgYWNjZXNzIHRocm91Z2ggc3F1YXJlIGJyYWNrZXRzXCIsXG4gICAgYFxuICAgICAgcHJvdmlkZXIgXCJhd3NcIiB7XG4gICAgICAgIHJlZ2lvbiAgICAgICAgICAgICAgICAgICAgICA9IFwidXMtZWFzdC0xXCJcbiAgICAgIH1cbiAgICAgIHZhcmlhYmxlIFwic2V0dGluZ3NcIiB7XG4gICAgICAgIHR5cGUgPSBtYXAoc3RyaW5nKVxuICAgICAgfVxuXG4gICAgICByZXNvdXJjZSBcImF3c19zM19idWNrZXRcIiBcImV4YW1wbGVidWNrZXRcIiB7XG4gICAgICAgIGJ1Y2tldCA9IHZhci5zZXR0aW5nc1tcImJ1Y2tldF9uYW1lXCJdXG4gICAgICAgIGFjbCAgICA9IFwicHJpdmF0ZVwiXG4gICAgICB9XG4gICAgICBgLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJsaXN0IGFjY2VzcyB0aHJvdWdoIHNxdWFyZSBicmFja2V0c1wiLFxuICAgIGBcbiAgICAgIHByb3ZpZGVyIFwiYXdzXCIge1xuICAgICAgICByZWdpb24gICAgICAgICAgICAgICAgICAgICAgPSBcInVzLWVhc3QtMVwiXG4gICAgICB9XG4gICAgICB2YXJpYWJsZSBcInNldHRpbmdzXCIge1xuICAgICAgICB0eXBlID0gbGlzdChtYXAoc3RyaW5nKSlcbiAgICAgIH1cblxuICAgICAgcmVzb3VyY2UgXCJhd3NfczNfYnVja2V0XCIgXCJleGFtcGxlYnVja2V0XCIge1xuICAgICAgICBidWNrZXQgPSB2YXIuc2V0dGluZ3NbMF1bXCJidWNrZXRfbmFtZVwiXVxuICAgICAgICBhY2wgICAgPSBcInByaXZhdGVcIlxuICAgICAgfVxuICAgICAgYCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwiY291bnQgbG9vcHNcIixcbiAgICBgXG4gICAgICAgIHByb3ZpZGVyIFwiYXdzXCIge1xuICAgICAgICAgIHJlZ2lvbiAgICAgICAgICAgICAgICAgICAgICA9IFwidXMtZWFzdC0xXCJcbiAgICAgICAgfVxuICAgICAgICB2YXJpYWJsZSBcInVzZXJzXCIge1xuICAgICAgICAgIHR5cGUgPSBzZXQoc3RyaW5nKVxuICAgICAgICB9XG5cbiAgICAgICAgcmVzb3VyY2UgXCJhd3NfaWFtX3VzZXJcIiBcImxiXCIge1xuICAgICAgICAgIGNvdW50ID0gbGVuZ3RoKHZhci51c2VycylcbiAgICAgICAgICBuYW1lID0gZWxlbWVudCh2YXIudXNlcnMsIGNvdW50LmluZGV4KVxuICAgICAgICAgIHBhdGggPSBcIi9zeXN0ZW0vXCJcbiAgICAgICAgXG4gICAgICAgICAgdGFncyA9IHtcbiAgICAgICAgICAgIHRhZy1rZXkgPSBcInRhZy12YWx1ZVwiXG4gICAgICAgICAgfVxuICAgICAgICB9YCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwic2ltcGxlIGNvdW50XCIsXG4gICAgYFxuICAgIHByb3ZpZGVyIFwiYXdzXCIge1xuICAgICAgcmVnaW9uICAgICAgICAgICAgICAgICAgICAgID0gXCJ1cy1lYXN0LTFcIlxuICAgIH1cbiAgICByZXNvdXJjZSBcImF3c19pbnN0YW5jZVwiIFwibXVsdGlwbGVfc2VydmVyc1wiIHtcbiAgICAgIGNvdW50ID0gNFxuICAgIFxuICAgICAgYW1pICAgICAgICAgICA9IFwiYW1pLTBjMmI4Y2ExZGFkNDQ3ZjhhXCJcbiAgICAgIGluc3RhbmNlX3R5cGUgPSBcInQyLm1pY3JvXCJcbiAgICBcbiAgICAgIHRhZ3MgPSB7XG4gICAgICAgIE5hbWUgPSBcIlNlcnZlciBcXCR7Y291bnQuaW5kZXh9XCJcbiAgICAgIH1cbiAgICB9XG4gICAgYCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwiZHluYW1pYyBibG9ja3NcIixcbiAgICBgXG4gICAgICBwcm92aWRlciBcImF3c1wiIHtcbiAgICAgICAgcmVnaW9uICAgICAgICAgICAgICAgICAgICAgID0gXCJ1cy1lYXN0LTFcIlxuICAgICAgfVxuICAgICAgdmFyaWFibGUgXCJzZXR0aW5nc1wiIHtcbiAgICAgICAgdHlwZSA9IGxpc3QobWFwKHN0cmluZykpXG4gICAgICB9XG5cbiAgICAgIHZhcmlhYmxlIFwibmFtZXNwYWNlXCIge1xuICAgICAgICB0eXBlID0gc3RyaW5nXG4gICAgICB9XG5cbiAgICAgIHJlc291cmNlIFwiYXdzX2VsYXN0aWNfYmVhbnN0YWxrX2Vudmlyb25tZW50XCIgXCJ0ZmVudnRlc3RcIiB7XG4gICAgICAgIG5hbWUgICAgICAgICAgICAgICAgPSBcInRmLXRlc3QtbmFtZVwiXG4gICAgICAgIGFwcGxpY2F0aW9uICAgICAgICAgPSBcImJlc3QtYXBwXCJcbiAgICAgICAgc29sdXRpb25fc3RhY2tfbmFtZSA9IFwiNjRiaXQgQW1hem9uIExpbnV4IDIwMTguMDMgdjIuMTEuNCBydW5uaW5nIEdvIDEuMTIuNlwiXG4gICAgICBcbiAgICAgICAgZHluYW1pYyBcInNldHRpbmdcIiB7XG4gICAgICAgICAgZm9yX2VhY2ggPSB2YXIuc2V0dGluZ3NcbiAgICAgICAgICBjb250ZW50IHtcbiAgICAgICAgICAgIG5hbWVzcGFjZSA9IHZhci5uYW1lc3BhY2VcbiAgICAgICAgICAgIG5hbWUgPSBzZXR0aW5nLnZhbHVlW1wibmFtZVwiXVxuICAgICAgICAgICAgdmFsdWUgPSBzZXR0aW5nLnZhbHVlW1widmFsdWVcIl1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1gLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJtdWx0aXBsZSBibG9ja3NcIixcbiAgICBgXG4gICAgcHJvdmlkZXIgXCJhd3NcIiB7XG4gICAgICByZWdpb24gICAgICAgICAgICAgICAgICAgICAgPSBcInVzLWVhc3QtMVwiXG4gICAgfVxuICAgIHJlc291cmNlIFwiYXdzX3NlY3VyaXR5X2dyb3VwXCIgXCJhbGxvd190bHNcIiB7XG4gICAgICBuYW1lICAgICAgICA9IFwiYWxsb3dfdGxzXCJcbiAgICAgIGRlc2NyaXB0aW9uID0gXCJBbGxvdyBUTFMgaW5ib3VuZCB0cmFmZmljXCJcbiAgICBcbiAgICAgIGluZ3Jlc3Mge1xuICAgICAgICBkZXNjcmlwdGlvbiAgICAgID0gXCJUTFMgZnJvbSBWUENcIlxuICAgICAgICBmcm9tX3BvcnQgICAgICAgID0gNDQzXG4gICAgICAgIHRvX3BvcnQgICAgICAgICAgPSA0NDNcbiAgICAgICAgcHJvdG9jb2wgICAgICAgICA9IFwidGNwXCJcbiAgICAgIH1cblxuICAgICAgaW5ncmVzcyB7XG4gICAgICAgIGRlc2NyaXB0aW9uICAgICAgPSBcIlRMUyBmcm9tIFZQQ1wiXG4gICAgICAgIGZyb21fcG9ydCAgICAgICAgPSA4MFxuICAgICAgICB0b19wb3J0ICAgICAgICAgID0gODBcbiAgICAgICAgcHJvdG9jb2wgICAgICAgICA9IFwidGNwXCJcbiAgICAgIH1cblxuICAgICAgaW5ncmVzcyB7XG4gICAgICAgIGZyb21fcG9ydCAgICAgICAgPSA4MDgwXG4gICAgICAgIHRvX3BvcnQgICAgICAgICAgPSA4MDgwXG4gICAgICAgIHByb3RvY29sICAgICAgICAgPSBcInRjcFwiXG4gICAgICB9XG4gICAgXG4gICAgICBlZ3Jlc3Mge1xuICAgICAgICBmcm9tX3BvcnQgICAgICAgID0gMFxuICAgICAgICB0b19wb3J0ICAgICAgICAgID0gMFxuICAgICAgICBwcm90b2NvbCAgICAgICAgID0gXCItMVwiXG4gICAgICAgIGNpZHJfYmxvY2tzICAgICAgPSBbXCIwLjAuMC4wLzBcIl1cbiAgICAgICAgaXB2Nl9jaWRyX2Jsb2NrcyA9IFtcIjo6LzBcIl1cbiAgICAgIH1cbiAgICBcbiAgICAgIHRhZ3MgPSB7XG4gICAgICAgIE5hbWUgPSBcImFsbG93X3Rsc1wiXG4gICAgICB9XG4gICAgfWAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcInByb3ZpZGVyIGFsaWFzXCIsXG4gICAgYFxuICAgICAgcHJvdmlkZXIgXCJhd3NcIiB7XG4gICAgICAgIHJlZ2lvbiA9IFwidXMtZWFzdC0xXCJcbiAgICAgIH1cblxuICAgICAgcHJvdmlkZXIgXCJhd3NcIiB7XG4gICAgICAgIGFsaWFzICA9IFwid2VzdFwiXG4gICAgICAgIHJlZ2lvbiA9IFwidXMtd2VzdC0yXCJcbiAgICAgIH1cblxuICAgICAgcmVzb3VyY2UgXCJhd3NfaW5zdGFuY2VcIiBcImZvb1wiIHtcbiAgICAgICAgcHJvdmlkZXIgPSBhd3Mud2VzdFxuICAgICAgXG4gICAgICAgIGZvbyA9IFwiYmFyXCJcbiAgICAgIH1cblxuICAgICAgbW9kdWxlIFwidnBjXCIge1xuICAgICAgICBzb3VyY2UgPSBcInRlcnJhZm9ybS1hd3MtbW9kdWxlcy92cGMvYXdzXCJcbiAgICAgICAgcHJvdmlkZXJzID0ge1xuICAgICAgICAgIGF3cyA9IGF3cy53ZXN0XG4gICAgICAgIH1cbiAgICAgIH0gICAgICAgIFxuICAgICAgYCxcbiAgICBTeW50aC5uZXZlclxuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJsb2NhbCBtb2R1bGVcIixcbiAgICBgXG4gICAgbW9kdWxlIFwiYXdzX3ZwY1wiIHtcbiAgICAgIHNvdXJjZSA9IFwiLi9hd3NfdnBjXCJcbiAgICB9ICAgICAgICBcbiAgICBgLFxuICAgIFN5bnRoLm5ldmVyXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcImNvbXBsZXggZm9yIGVhY2ggbG9vcHNcIixcbiAgICBgXG4gIHByb3ZpZGVyIFwiYXdzXCIge1xuICAgIHJlZ2lvbiA9IFwidXMtZWFzdC0xXCJcbiAgfVxuXG4gIHJlc291cmNlIFwiYXdzX2FjbV9jZXJ0aWZpY2F0ZVwiIFwiZXhhbXBsZVwiIHtcbiAgICBkb21haW5fbmFtZSAgICAgICA9IFwiZXhhbXBsZS5jb21cIlxuICAgIHZhbGlkYXRpb25fbWV0aG9kID0gXCJETlNcIlxuICB9XG4gIFxuICBkYXRhIFwiYXdzX3JvdXRlNTNfem9uZVwiIFwiZXhhbXBsZVwiIHtcbiAgICBuYW1lICAgICAgICAgPSBcImV4YW1wbGUuY29tXCJcbiAgICBwcml2YXRlX3pvbmUgPSBmYWxzZVxuICB9XG4gIFxuICByZXNvdXJjZSBcImF3c19yb3V0ZTUzX3JlY29yZFwiIFwiZXhhbXBsZVwiIHtcbiAgICBmb3JfZWFjaCA9IHtcbiAgICAgIGZvciBkdm8gaW4gYXdzX2FjbV9jZXJ0aWZpY2F0ZS5leGFtcGxlLmRvbWFpbl92YWxpZGF0aW9uX29wdGlvbnMgOiBkdm8uZG9tYWluX25hbWUgPT4ge1xuICAgICAgICBuYW1lICAgPSBkdm8ucmVzb3VyY2VfcmVjb3JkX25hbWVcbiAgICAgICAgcmVjb3JkID0gZHZvLnJlc291cmNlX3JlY29yZF92YWx1ZVxuICAgICAgICB0eXBlICAgPSBkdm8ucmVzb3VyY2VfcmVjb3JkX3R5cGVcbiAgICAgIH1cbiAgICB9XG4gIFxuICAgIGFsbG93X292ZXJ3cml0ZSA9IHRydWVcbiAgICBuYW1lICAgICAgICAgICAgPSBlYWNoLnZhbHVlLm5hbWVcbiAgICByZWNvcmRzICAgICAgICAgPSBbZWFjaC52YWx1ZS5yZWNvcmRdXG4gICAgdHRsICAgICAgICAgICAgID0gNjBcbiAgICB0eXBlICAgICAgICAgICAgPSBlYWNoLnZhbHVlLnR5cGVcbiAgICB6b25lX2lkICAgICAgICAgPSBkYXRhLmF3c19yb3V0ZTUzX3pvbmUuZXhhbXBsZS56b25lX2lkXG4gIH1cbiAgXG4gIHJlc291cmNlIFwiYXdzX2FjbV9jZXJ0aWZpY2F0ZV92YWxpZGF0aW9uXCIgXCJleGFtcGxlXCIge1xuICAgIGNlcnRpZmljYXRlX2FybiAgICAgICAgID0gYXdzX2FjbV9jZXJ0aWZpY2F0ZS5leGFtcGxlLmFyblxuICAgIHZhbGlkYXRpb25fcmVjb3JkX2ZxZG5zID0gW2ZvciByZWNvcmQgaW4gYXdzX3JvdXRlNTNfcmVjb3JkLmV4YW1wbGUgOiByZWNvcmQuZnFkbl1cbiAgfVxuICBcbiAgcmVzb3VyY2UgXCJhd3NfbGJfbGlzdGVuZXJcIiBcImV4YW1wbGVcIiB7XG4gICAgIyAuLi4gb3RoZXIgY29uZmlndXJhdGlvbiAuLi5cbiAgICBcbiAgICBjZXJ0aWZpY2F0ZV9hcm4gICA9IGF3c19hY21fY2VydGlmaWNhdGVfdmFsaWRhdGlvbi5leGFtcGxlLmNlcnRpZmljYXRlX2FyblxuICAgIGxvYWRfYmFsYW5jZXJfYXJuID0gXCJiZXN0LWxiLWFyblwiIFxuICAgIGRlZmF1bHRfYWN0aW9uICB7XG4gICAgICB0eXBlICAgICAgICAgICAgID0gXCJmb3J3YXJkXCJcbiAgICAgIHRhcmdldF9ncm91cF9hcm4gPSBcImJlc3QtdGFyZ2V0XCJcbiAgICB9XG4gIH1cbiAgICAgICAgICBcbiAgYCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwibG9jYWwgYmFja2VuZFwiLFxuICAgIGBcbiAgICAgIHRlcnJhZm9ybSB7XG4gICAgICAgIGJhY2tlbmQgXCJsb2NhbFwiIHtcbiAgICAgICAgICBwYXRoID0gXCJyZWxhdGl2ZS9wYXRoL3RvL3RlcnJhZm9ybS50ZnN0YXRlXCJcbiAgICAgICAgfVxuICAgICAgfSAgICAgXG4gICAgICBgLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJyZW1vdGUgYmFja2VuZFwiLFxuICAgIGBcbiAgICAgIHRlcnJhZm9ybSB7XG4gICAgICAgIGJhY2tlbmQgXCJyZW1vdGVcIiB7XG4gICAgICAgICAgaG9zdG5hbWUgPSBcImFwcC50ZXJyYWZvcm0uaW9cIlxuICAgICAgICAgIG9yZ2FuaXphdGlvbiA9IFwiY29tcGFueVwiXG4gICAgICBcbiAgICAgICAgICB3b3Jrc3BhY2VzIHtcbiAgICAgICAgICAgIG5hbWUgPSBcIm15LWFwcC1wcm9kXCJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcIm51bWVyaWMgcHJvcGVydHkgYWNjZXNzXCIsXG4gICAgYFxuICAgICAgcHJvdmlkZXIgXCJnb29nbGVcIiB7XG4gICAgICAgIHByb2plY3QgPSBcIm15LXByb2plY3RcIlxuICAgICAgICByZWdpb24gID0gXCJ1cy1jZW50cmFsMVwiXG4gICAgICB9XG4gICAgICByZXNvdXJjZSBcImdvb2dsZV9jb21wdXRlX2luc3RhbmNlXCIgXCJleGFtcGxlXCIge1xuICAgICAgICBuYW1lICAgICAgICAgID0gXCJleGFtcGxlXCJcbiAgICAgICAgbWFjaGluZV90eXBlICA9IFwiZjEtbWljcm9cIlxuICAgICAgICB6b25lICAgICAgICAgID0gXCJ1cy1lYXN0MS1iXCJcblxuICAgICAgICBib290X2Rpc2sge1xuICAgICAgICAgIGluaXRpYWxpemVfcGFyYW1zIHtcbiAgICAgICAgICAgIGltYWdlID0gXCJkZWJpYW4tY2xvdWQvZGViaWFuLTlcIlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG5ldHdvcmtfaW50ZXJmYWNlIHtcbiAgICAgICAgICBuZXR3b3JrID0gXCJkZWZhdWx0XCJcblxuICAgICAgICAgIGFjY2Vzc19jb25maWcge1xuICAgICAgICAgICAgLy8gRXBoZW1lcmFsIElQXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG91dHB1dCBcInB1YmxpY19pcFwiIHtcbiAgICAgICAgdmFsdWUgPSBcIlxcJHtnb29nbGVfY29tcHV0ZV9pbnN0YW5jZS5leGFtcGxlLm5ldHdvcmtfaW50ZXJmYWNlLjAuYWNjZXNzX2NvbmZpZy4wLmFzc2lnbmVkX25hdF9pcH1cIlxuICAgICAgfVxuICAgICAgYCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwiYmxvY2tzIHNob3VsZCBiZSBhcnJheXNcIixcbiAgICBgXG4gICAgcHJvdmlkZXIgXCJnb29nbGVcIiB7XG4gICAgICBwcm9qZWN0ID0gXCJteS1wcm9qZWN0XCJcbiAgICAgIHJlZ2lvbiAgPSBcInVzLWNlbnRyYWwxXCJcbiAgICB9XG4gICAgcmVzb3VyY2UgXCJnb29nbGVfY29tcHV0ZV9hdXRvc2NhbGVyXCIgXCJleGFtcGxlXCIge1xuICAgICAgbmFtZSAgID0gXCJleGFtcGxlLWF1dG9zY2FsZXJcIlxuICAgICAgem9uZSAgID0gXCJ1cy1lYXN0MS1iXCJcbiAgICAgIHRhcmdldCA9IFwidGFyZ2V0LWZvci1leGFtcGxlLWF1dG9zY2FsZXJcIlxuICAgIFxuICAgICAgYXV0b3NjYWxpbmdfcG9saWN5ID0ge1xuICAgICAgICBtYXhfcmVwbGljYXMgICAgPSA4XG4gICAgICAgIG1pbl9yZXBsaWNhcyAgICA9IDJcbiAgICAgICAgY29vbGRvd25fcGVyaW9kID0gNjBcbiAgICBcbiAgICAgICAgY3B1X3V0aWxpemF0aW9uID0ge1xuICAgICAgICAgIHRhcmdldCA9IDAuNVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcInByb3ZpZGVyIHdpdGggdmFyIHJlZmVyZW5jZVwiLFxuICAgIGBcbiAgICB2YXJpYWJsZSBcImRvbWFpblwiIHtcbiAgICAgIGRlc2NyaXB0aW9uID0gXCJBIGRvbWFpblwiXG4gICAgfVxuICAgIHByb3ZpZGVyIFwiYXV0aDBcIiB7XG4gICAgICBkb21haW4gICAgICAgID0gdmFyLmRvbWFpblxuICAgICAgY2xpZW50X2lkICAgICA9IFwiY2xpZW50X2lkXCJcbiAgICAgIGNsaWVudF9zZWNyZXQgPSBcImNsaWVudF9zZWNyZXRcIlxuICAgIH1cbiAgICBgLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJkYXRhIGxvY2FsX2ZpbGVcIixcbiAgICBgXG4gICAgcHJvdmlkZXIgXCJsb2NhbFwiIHt9XG4gICAgZGF0YSBcImxvY2FsX2ZpbGVcIiBcIl8wMV9wbGVhc2VfdmVyaWZ5XCIge1xuICAgICAgZmlsZW5hbWUgPSBcIi4vZW1haWxfdGVtcGxhdGVzLzAxX3BsZWFzZV92ZXJpZnkvdGVtcGxhdGUuaHRtbFwiXG4gICAgfVxuICAgIGAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcInJlcXVpcmVkIG5hbWVzcGFjZWQgcHJvdmlkZXJcIixcbiAgICBgXG4gICAgICB2YXJpYWJsZSBcImRvbWFpblwiIHtcbiAgICAgICAgZGVzY3JpcHRpb24gPSBcIkEgZG9tYWluXCJcbiAgICAgIH1cbiAgICAgIHByb3ZpZGVyIFwiYXV0aDBcIiB7XG4gICAgICAgIGRvbWFpbiA9IHZhci5kb21haW5cbiAgICAgICAgY2xpZW50X2lkID0gXCI0MlwiXG4gICAgICAgIGNsaWVudF9zZWNyZXQgPSBcInNlY3JldFwiXG4gICAgICB9XG4gICAgICBcbiAgICAgIHRlcnJhZm9ybSB7XG4gICAgICAgIHJlcXVpcmVkX3Byb3ZpZGVycyB7XG4gICAgICAgICAgYXV0aDAgPSB7XG4gICAgICAgICAgICBzb3VyY2UgID0gXCJhbGV4a2FwcGEvYXV0aDBcIlxuICAgICAgICAgICAgdmVyc2lvbiA9IFwiMC4xOS4wXCJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcImZvcl9lYWNoIHdpdGggdmFyIHVzYWdlXCIsXG4gICAgYFxuICAgICAgcHJvdmlkZXIgXCJhenVyZWFkXCIge1xuICAgICAgICB0ZW5hbnRfaWQgPSBcIjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMFwiXG4gICAgICB9XG4gICAgICB2YXJpYWJsZSBcIm9uZV9zZXRfb2ZfdXNlcnNcIiB7XG4gICAgICAgIGRlc2NyaXB0aW9uID0gXCJ1c2Vyc1wiXG4gICAgICB9XG4gICAgICB2YXJpYWJsZSBcIm90aGVyX3NldF9vZl91c2Vyc1wiIHtcbiAgICAgICAgZGVzY3JpcHRpb24gPSBcInVzZXJzXCJcbiAgICAgIH1cbiAgICAgIHZhcmlhYmxlIFwiYXp1cmVfYWRfZG9tYWluX25hbWVcIiB7XG4gICAgICAgIGRlc2NyaXB0aW9uID0gXCJkb21haW5cIlxuICAgICAgfVxuICAgICAgcmVzb3VyY2UgXCJhenVyZWFkX3VzZXJcIiBcImF6dXJlX3VzZXJzXCIge1xuICAgICAgICBmb3JfZWFjaCA9IG1lcmdlKFxuICAgICAgICAgIHZhci5vbmVfc2V0X29mX3VzZXJzLFxuICAgICAgICAgIHZhci5vdGhlcl9zZXRfb2ZfdXNlcnMsXG4gICAgICAgIClcbiAgICAgIFxuICAgICAgICB1c2VyX3ByaW5jaXBhbF9uYW1lID0gXCJcXCR7ZWFjaC52YWx1ZX1cXCR7dmFyLmF6dXJlX2FkX2RvbWFpbl9uYW1lfVwiXG4gICAgICAgIGRpc3BsYXlfbmFtZSAgICAgICAgPSBlYWNoLmtleVxuICAgICAgfVxuICAgICAgYCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwidGVycmFmb3JtIHdvcmtzcGFjZVwiLFxuICAgIGBcbiAgICBtb2R1bGUgXCJleGFtcGxlXCIge1xuICAgICAgc291cmNlID0gXCIuL215LW1vZHVsZVwiXG4gICAgICBuYW1lX3ByZWZpeCA9IFwiYXBwLVxcJHt0ZXJyYWZvcm0ud29ya3NwYWNlfVwiXG4gICAgfVxuICAgIGAsXG4gICAgU3ludGgubmV2ZXJcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwibWFwcyBhcmUgbm90IGFycmF5c1wiLFxuICAgIGBcbiAgcHJvdmlkZXIgXCJrdWJlcm5ldGVzXCIge1xuICAgIGNvbmZpZ19wYXRoICAgID0gXCJ+Ly5rdWJlL2NvbmZpZ1wiXG4gICAgY29uZmlnX2NvbnRleHQgPSBcIm15LWNvbnRleHRcIlxuICB9XG5cbiAgcmVzb3VyY2UgXCJrdWJlcm5ldGVzX3NlY3JldFwiIFwic2VjcmV0cy14eHhcIiB7XG4gICAgbWV0YWRhdGEge1xuICAgICAgbmFtZSAgICAgID0gXCJzZWNyZXRzLXh4eFwiXG4gICAgfVxuICAgIGRhdGEgPSB7XG4gICAgICBcInh4eFwiIDogXCJ5eXlcIlxuICAgIH1cbiAgfVxuICBgLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJtYXBzIGRvbnQgZ2V0IGNhbWVsIGNhc2Uga2V5c1wiLFxuICAgIGBcbiAgcHJvdmlkZXIgXCJrdWJlcm5ldGVzXCIge1xuICAgIGNvbmZpZ19wYXRoICAgID0gXCJ+Ly5rdWJlL2NvbmZpZ1wiXG4gICAgY29uZmlnX2NvbnRleHQgPSBcIm15LWNvbnRleHRcIlxuICB9XG5cbiAgcmVzb3VyY2UgXCJrdWJlcm5ldGVzX3NlY3JldFwiIFwic2VjcmV0cy14eHhcIiB7XG4gICAgbWV0YWRhdGEge1xuICAgICAgbmFtZSAgICAgID0gXCJzZWNyZXRzLXh4eFwiXG4gICAgfVxuICAgIGRhdGEgPSB7XG4gICAgICBcImNhbWVsX2Nhc2VkX2tleVwiOiBcInllc1wiXG4gICAgfVxuICB9XG4gIGAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcImFsbCBtb2R1bGUgdHlwZXNcIixcbiAgICBgXG4gICAgICBtb2R1bGUgXCJjb25zdWxcIiB7XG4gICAgICAgIHNvdXJjZSA9IFwiLi9jb25zdWxcIlxuICAgICAgfVxuICAgICAgbW9kdWxlIFwiY29uc3VsLXJlZ2lzdHJ5XCIge1xuICAgICAgICBzb3VyY2UgPSBcImhhc2hpY29ycC9jb25zdWwvYXdzXCJcbiAgICAgICAgdmVyc2lvbiA9IFwiMC4xLjBcIlxuICAgICAgfVxuICAgICAgbW9kdWxlIFwiY29uc3VsLWhvc3RlZC1yZWdpc3RyeVwiIHtcbiAgICAgICAgc291cmNlID0gXCJhcHAudGVycmFmb3JtLmlvL2V4YW1wbGUtY29ycC9rOHMtY2x1c3Rlci9henVyZXJtXCJcbiAgICAgICAgdmVyc2lvbiA9IFwiMS4xLjBcIlxuICAgICAgfVxuICAgICAgbW9kdWxlIFwiY29uc3VsLWdpdGh1YlwiIHtcbiAgICAgICAgc291cmNlID0gXCJnaXRodWIuY29tL2hhc2hpY29ycC9leGFtcGxlXCJcbiAgICAgIH1cbiAgICAgIG1vZHVsZSBcImNvbnN1bC1naXRcIiB7XG4gICAgICAgIHNvdXJjZSA9IFwiZ2l0QGdpdGh1Yi5jb206aGFzaGljb3JwL2V4YW1wbGUuZ2l0XCJcbiAgICAgIH1cbiAgICAgIG1vZHVsZSBcImNvbnN1bC1idXRidWNrZXRcIiB7XG4gICAgICAgIHNvdXJjZSA9IFwiYml0YnVja2V0Lm9yZy9oYXNoaWNvcnAvdGVycmFmb3JtLWNvbnN1bC1hd3NcIlxuICAgICAgfVxuICAgICAgbW9kdWxlIFwidnBjXCIge1xuICAgICAgICBzb3VyY2UgPSBcImdpdDo6aHR0cHM6Ly9leGFtcGxlLmNvbS92cGMuZ2l0XCJcbiAgICAgIH1cbiAgICAgIG1vZHVsZSBcInN0b3JhZ2VcIiB7XG4gICAgICAgIHNvdXJjZSA9IFwiZ2l0Ojpzc2g6Ly91c2VybmFtZUBleGFtcGxlLmNvbS9zdG9yYWdlLmdpdFwiXG4gICAgICB9XG4gICAgICBgLFxuICAgIFN5bnRoLm5ldmVyXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcIm51bWJlciBvdXRwdXRcIixcbiAgICBgXG4gICAgb3V0cHV0IFwidGVzdFwiIHtcbiAgICAgIHZhbHVlID0gNDJcbiAgICB9XG4gICAgYCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwic2FtZSBuYW1lIGxvY2FsLCB2YXIsIG91dFwiLFxuICAgIGBcbiAgICB2YXJpYWJsZSBcInRlc3RcIiB7XG4gICAgICB0eXBlICAgID0gc3RyaW5nXG4gICAgfVxuICAgIGxvY2FscyB7XG4gICAgICB0ZXN0ID0gXCJcXCR7dmFyLnRlc3R9ICsgMVwiXG4gICAgfVxuICAgIG91dHB1dCBcInRlc3RcIiB7XG4gICAgICB2YWx1ZSA9IFwiXFwke2xvY2FsLnRlc3R9XCJcbiAgICB9XG4gICAgYCxcbiAgICBTeW50aC55ZXNcbiAgKTtcblxuICB0ZXN0Q2FzZS50ZXN0KFxuICAgIFwiYWxpYXNlZCBkdXBsaWNhdGUgcHJvdmlkZXIgd2l0aCB2YXIgcmVmZXJlbmNlXCIsXG4gICAgYFxuICAgIHZhcmlhYmxlIFwiZG9tYWluXCIge1xuICAgICAgZGVzY3JpcHRpb24gPSBcIkEgZG9tYWluXCJcbiAgICB9XG4gICAgdmFyaWFibGUgXCJjbGllbnRfaWRcIiB7XG4gICAgICBkZXNjcmlwdGlvbiA9IFwiQSBjbGllbnRfaWRcIlxuICAgIH1cbiAgICB2YXJpYWJsZSBcImNsaWVudF9zZWNyZXRcIiB7XG4gICAgICBkZXNjcmlwdGlvbiA9IFwiQSBjbGllbnRfc2VjcmV0XCJcbiAgICB9XG4gICAgcHJvdmlkZXIgXCJhdXRoMFwiIHtcbiAgICAgIGRvbWFpbiAgICAgICAgPSB2YXIuZG9tYWluXG4gICAgICBjbGllbnRfaWQgICAgID0gdmFyLmNsaWVudF9pZFxuICAgICAgY2xpZW50X3NlY3JldCA9IHZhci5jbGllbnRfc2VjcmV0XG4gICAgfVxuICAgIHByb3ZpZGVyIFwiYXV0aDBcIiB7XG4gICAgICBhbGlhcyAgICAgICAgID0gXCJwcml2YXRlX2F1dGgwXCJcbiAgICAgIGRvbWFpbiAgICAgICAgPSB2YXIuZG9tYWluXG4gICAgICBjbGllbnRfaWQgICAgID0gdmFyLmNsaWVudF9pZFxuICAgICAgY2xpZW50X3NlY3JldCA9IHZhci5jbGllbnRfc2VjcmV0XG4gICAgICBkZWJ1ZyAgICAgICAgID0gdHJ1ZVxuICAgIH1cbiAgICBgLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJyZW1vdGUgc3RhdGVcIixcbiAgICBgXG4gICAgICBkYXRhIFwidGVycmFmb3JtX3JlbW90ZV9zdGF0ZVwiIFwidnBjXCIge1xuICAgICAgICBiYWNrZW5kID0gXCJyZW1vdGVcIlxuXG4gICAgICAgIGNvbmZpZyA9IHtcbiAgICAgICAgICBvcmdhbml6YXRpb24gPSBcImhhc2hpY29ycFwiXG4gICAgICAgICAgd29ya3NwYWNlcyA9IHtcbiAgICAgICAgICAgIG5hbWUgPSBcInZwYy1wcm9kXCJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcInJlbW90ZSBzdGF0ZSB0eXBlc1wiLFxuICAgIGBcbiAgICAgIGRhdGEgXCJ0ZXJyYWZvcm1fcmVtb3RlX3N0YXRlXCIgXCJldGNkdjNcIiB7XG4gICAgICAgIGJhY2tlbmQgPSBcImV0Y2R2M1wiXG5cbiAgICAgICAgY29uZmlnID0ge1xuICAgICAgICAgIGVuZHBvaW50cyA9IFtcImV0Y2QtMToyMzc5XCIsIFwiZXRjZC0yOjIzNzlcIiwgXCJldGNkLTM6MjM3OVwiXVxuICAgICAgICAgIGxvY2sgICAgICA9IHRydWVcbiAgICAgICAgICBwcmVmaXggICAgPSBcInRlcnJhZm9ybS1zdGF0ZS9cIlxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRhdGEgXCJ0ZXJyYWZvcm1fcmVtb3RlX3N0YXRlXCIgXCJzM1wiIHtcbiAgICAgICAgYmFja2VuZCA9IFwiczNcIlxuXG4gICAgICAgIGNvbmZpZyA9IHtcbiAgICAgICAgICBidWNrZXQgPSBcIm15YnVja2V0XCJcbiAgICAgICAgICBrZXkgICAgPSBcInBhdGgvdG8vbXkva2V5XCJcbiAgICAgICAgICByZWdpb24gPSBcInVzLWVhc3QtMVwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGAsXG4gICAgU3ludGgueWVzXG4gICk7XG5cbiAgdGVzdENhc2UudGVzdChcbiAgICBcInByb3BlcnR5IGxldmVsIHJlbmFtaW5nc1wiLFxuICAgIGBcbiAgICBwcm92aWRlciBcImF3c1wiIHtcbiAgICAgIHJlZ2lvbiAgICAgICAgICAgICAgICAgICAgICA9IFwidXMtZWFzdC0xXCJcbiAgICB9XG4gICAgcmVzb3VyY2UgXCJhd3NfZ3VhcmRkdXR5X2ZpbHRlclwiIFwiTXlGaWx0ZXJcIiB7XG4gICAgICBuYW1lICAgICAgICA9IFwiTXlGaWx0ZXJcIlxuICAgICAgYWN0aW9uICAgICAgPSBcIkFSQ0hJVkVcIlxuICAgICAgZGV0ZWN0b3JfaWQgPSBcImlkXCJcbiAgICAgIHJhbmsgICAgICAgID0gMVxuICAgIFxuICAgICAgZmluZGluZ19jcml0ZXJpYSB7XG4gICAgICAgIGNyaXRlcmlvbiB7XG4gICAgICAgICAgZmllbGQgID0gXCJyZWdpb25cIlxuICAgICAgICAgIGVxdWFscyA9IFtcImV1LXdlc3QtMVwiXVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNyaXRlcmlvbiB7XG4gICAgICAgICAgZmllbGQgICAgICA9IFwic2VydmljZS5hZGRpdGlvbmFsSW5mby50aHJlYXRMaXN0TmFtZVwiXG4gICAgICAgICAgbm90X2VxdWFscyA9IFtcInNvbWUtdGhyZWF0XCIsIFwiYW5vdGhlci10aHJlYXRcIl1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjcml0ZXJpb24ge1xuICAgICAgICAgIGZpZWxkICAgICAgICA9IFwidXBkYXRlZEF0XCJcbiAgICAgICAgICBncmVhdGVyX3RoYW4gPSBcIjIwMjAtMDEtMDFUMDA6MDA6MDBaXCJcbiAgICAgICAgICBsZXNzX3RoYW4gICAgPSBcIjIwMjAtMDItMDFUMDA6MDA6MDBaXCJcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjcml0ZXJpb24ge1xuICAgICAgICAgIGZpZWxkICAgICAgICAgICAgICAgICA9IFwic2V2ZXJpdHlcIlxuICAgICAgICAgIGdyZWF0ZXJfdGhhbl9vcl9lcXVhbCA9IFwiNFwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgICBgLFxuICAgIFN5bnRoLnllc1xuICApO1xuXG4gIHRlc3RDYXNlLnRlc3QoXG4gICAgXCJ0cmlja3kgdG8gcGFyc2UgaXRlbXNcIixcbiAgICBgXG4gICAgcHJvdmlkZXIgXCJhd3NcIiB7XG4gICAgICByZWdpb24gICAgICAgICAgICAgICAgICAgICAgPSBcInVzLWVhc3QtMVwiXG4gICAgfVxuICAgIHZhcmlhYmxlIFwidGFnc1wiIHtcbiAgICAgIHR5cGUgICAgPSBtYXBcbiAgICB9XG5cblxuICAgIHJlc291cmNlIFwiYXdzX2luc3RhbmNlXCIgXCJwbGF5XCIge1xuICAgICAgYW1pICAgICAgICAgICAgICAgICAgICAgICAgID0gam9pbihcIi1cIiwgW3Zhci50YWdzLmFwcCwgdmFyLnRhZ3MuZW52XSlcbiAgICAgIGluc3RhbmNlX3R5cGUgICAgICAgICAgICAgICA9IFwidDMuc21hbGxcIlxuICAgICAga2V5X25hbWUgICAgICAgICAgICAgICAgICAgID0gYXdzX2tleV9wYWlyLm1hc3Rlcl9rZXkuaWRcbiAgICAgIHZwY19zZWN1cml0eV9ncm91cF9pZHMgICAgICA9IFthd3Nfc2VjdXJpdHlfZ3JvdXAuc3NoLmlkXVxuICAgICAgc3VibmV0X2lkICAgICAgICAgICAgICAgICAgID0gYXdzX3N1Ym5ldC5tYWluLmlkXG4gICAgICBhc3NvY2lhdGVfcHVibGljX2lwX2FkZHJlc3MgPSB0cnVlXG4gICAgXG4gICAgICBjb25uZWN0aW9uIHtcbiAgICAgICAgdHlwZSAgICAgICAgPSBcInNzaFwiXG4gICAgICAgIHVzZXIgICAgICAgID0gXCJ1YnVudHVcIlxuICAgICAgICBwcml2YXRlX2tleSA9IGZpbGUoXCIuL3RlcnJhZm9ybV9rZXlcIilcbiAgICAgICAgaG9zdCAgICAgICAgPSBzZWxmLnB1YmxpY19pcFxuICAgICAgfVxuICAgIH1cbiAgICAgIGAsXG4gICAgU3ludGgubmV2ZXJcbiAgKTtcblxuICBjb25zdCB0YXJnZXRMYW5ndWFnZXMgPSBbXCJ0eXBlc2NyaXB0XCIsIFwicHl0aG9uXCIsIFwiY3NoYXJwXCIsIFwiamF2YVwiXTtcbiAgZGVzY3JpYmUoXCJDcm9zcy1MYW5ndWFnZSBTdXBwb3J0XCIsICgpID0+IHtcbiAgICBpdC5lYWNoKHRhcmdldExhbmd1YWdlcykoXCJzdXBwb3J0cyAlc1wiLCAobGFuZ3VhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGhjbCA9IGBcbiAgICAgIHJlc291cmNlIFwiYXdzX2ttc19rZXlcIiBcImV4YW1wbGVrbXNcIiB7XG4gICAgICAgIGRlc2NyaXB0aW9uICAgICAgICAgICAgID0gXCJLTVMga2V5IDFcIlxuICAgICAgICBkZWxldGlvbl93aW5kb3dfaW5fZGF5cyA9IDdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmVzb3VyY2UgXCJhd3NfczNfYnVja2V0XCIgXCJleGFtcGxlYnVja2V0XCIge1xuICAgICAgICBidWNrZXQgPSBcImV4YW1wbGVidWNrZXR0ZnRlc3RcIlxuICAgICAgICBhY2wgICAgPSBcInByaXZhdGVcIlxuICAgICAgfVxuICAgICAgXG4gICAgICByZXNvdXJjZSBcImF3c19zM19idWNrZXRfb2JqZWN0XCIgXCJleGFtcGxlYnVja2V0X29iamVjdFwiIHtcbiAgICAgICAga2V5ICAgICAgICA9IFwic29tZW9iamVjdFwiXG4gICAgICAgIGJ1Y2tldCAgICAgPSBlbGVtZW50KGF3c19zM19idWNrZXQuZXhhbXBsZWJ1Y2tldCwgMCkuaWRcbiAgICAgICAgc291cmNlICAgICA9IFwiaW5kZXguaHRtbFwiXG4gICAgICAgIGttc19rZXlfaWQgPSBhd3Nfa21zX2tleS5leGFtcGxla21zLmFyblxuICAgICAgfVxuICAgICAgYDtcbiAgICAgIGV4cGVjdChcbiAgICAgICAgY29udmVydChoY2wsIHtcbiAgICAgICAgICBsYW5ndWFnZTogbGFuZ3VhZ2UgYXMgYW55LFxuICAgICAgICAgIHByb3ZpZGVyU2NoZW1hOiBjYWNoZWRQcm92aWRlclNjaGVtYSxcbiAgICAgICAgfSlcbiAgICAgICkudG9NYXRjaFNuYXBzaG90KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KFwiZXhwb3NlcyBzdGF0cyBmb3IgdGVsZW1ldHJ5XCIsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IHN0YXRzIH0gPSBhd2FpdCBjb252ZXJ0KFxuICAgICAgYFxuICByZXNvdXJjZSBcImF3c19rbXNfa2V5XCIgXCJleGFtcGxla21zXCIge1xuICAgIGRlc2NyaXB0aW9uICAgICAgICAgICAgID0gXCJLTVMga2V5IDFcIlxuICAgIGRlbGV0aW9uX3dpbmRvd19pbl9kYXlzID0gN1xuICB9XG4gIFxuICByZXNvdXJjZSBcImF3c19zM19idWNrZXRcIiBcImV4YW1wbGVidWNrZXRcIiB7XG4gICAgYnVja2V0ID0gXCJleGFtcGxlYnVja2V0dGZ0ZXN0XCJcbiAgICBhY2wgICAgPSBcInByaXZhdGVcIlxuICB9XG4gIHJlc291cmNlIFwiYXdzX3MzX2J1Y2tldFwiIFwiZXhhbXBsZWJ1Y2tldF90d29cIiB7XG4gICAgYnVja2V0ID0gXCJleGFtcGxlYnVja2V0dGZ0ZXN0XCJcbiAgICBhY2wgICAgPSBcInByaXZhdGVcIlxuICB9XG4gIHJlc291cmNlIFwiYXdzX3MzX2J1Y2tldFwiIFwiZXhhbXBsZWJ1Y2tldF90aHJlZVwiIHtcbiAgICBidWNrZXQgPSBcImV4YW1wbGVidWNrZXR0ZnRlc3RcIlxuICAgIGFjbCAgICA9IFwicHJpdmF0ZVwiXG4gIH1cblxuICByZXNvdXJjZSBcImludGVybmFsX2Nsb3VkX3MzX2J1Y2tldFwiIFwiZXhhbXBsZWJ1Y2tldFwiIHtcbiAgICBidWNrZXQgPSBcImV4YW1wbGVidWNrZXR0ZnRlc3RcIlxuICAgIGFjbCAgICA9IFwicHJpdmF0ZVwiXG4gIH1cbiAgcmVzb3VyY2UgXCJpbnRlcm5hbF9jbG91ZF9zM19idWNrZXRfb2JqZWN0XCIgXCJleGFtcGxlYnVja2V0X3R3b1wiIHtcbiAgICBidWNrZXQgPSBcImV4YW1wbGVidWNrZXR0ZnRlc3RcIlxuICAgIGFjbCAgICA9IFwicHJpdmF0ZVwiXG4gIH1cbiAgXG4gIHJlc291cmNlIFwiYXdzX3MzX2J1Y2tldF9vYmplY3RcIiBcImV4YW1wbGVidWNrZXRfb2JqZWN0XCIge1xuICAgIGtleSAgICAgICAgPSBcInNvbWVvYmplY3RcIlxuICAgIGJ1Y2tldCAgICAgPSBlbGVtZW50KGF3c19zM19idWNrZXQuZXhhbXBsZWJ1Y2tldCwgMCkuaWRcbiAgICBzb3VyY2UgICAgID0gXCJpbmRleC5odG1sXCJcbiAgICBrbXNfa2V5X2lkID0gYXdzX2ttc19rZXkuZXhhbXBsZWttcy5hcm5cbiAgfVxuICByZXNvdXJjZSBcImF3c19zM19idWNrZXRfb2JqZWN0XCIgXCJleGFtcGxlYnVja2V0X29iamVjdF90d29cIiB7XG4gICAga2V5ICAgICAgICA9IFwic29tZW9iamVjdFwiXG4gICAgYnVja2V0ICAgICA9IGVsZW1lbnQoYXdzX3MzX2J1Y2tldC5leGFtcGxlYnVja2V0LCAwKS5pZFxuICAgIHNvdXJjZSAgICAgPSBcImluZGV4Lmh0bWxcIlxuICAgIGttc19rZXlfaWQgPSBhd3Nfa21zX2tleS5leGFtcGxla21zLmFyblxuICB9XG4gIHJlc291cmNlIFwiZ29vZ2xlX2NvbXB1dGVfYXV0b3NjYWxlclwiIFwiZXhhbXBsZVwiIHtcbiAgICBuYW1lICAgPSBcImV4YW1wbGUtYXV0b3NjYWxlclwiXG4gICAgem9uZSAgID0gXCJ1cy1lYXN0MS1iXCJcbiAgXG4gICAgYXV0b3NjYWxpbmdfcG9saWN5ID0ge1xuICAgICAgbWF4X3JlcGxpY2FzICAgID0gOFxuICAgICAgbWluX3JlcGxpY2FzICAgID0gMlxuICAgICAgY29vbGRvd25fcGVyaW9kID0gNjBcbiAgXG4gICAgICBjcHVfdXRpbGl6YXRpb24gPSB7XG4gICAgICAgIHRhcmdldCA9IDAuNVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBgLFxuICAgICAgeyBsYW5ndWFnZTogXCJ0eXBlc2NyaXB0XCIsIHByb3ZpZGVyU2NoZW1hOiBjYWNoZWRQcm92aWRlclNjaGVtYSB9XG4gICAgKTtcblxuICAgIGV4cGVjdChzdGF0cykudG9NYXRjaElubGluZVNuYXBzaG90KGBcbiAgICAgIE9iamVjdCB7XG4gICAgICAgIFwiY29udmVydGVkTGluZXNcIjogNTUsXG4gICAgICAgIFwiZGF0YVwiOiBPYmplY3Qge30sXG4gICAgICAgIFwibGFuZ3VhZ2VcIjogXCJ0eXBlc2NyaXB0XCIsXG4gICAgICAgIFwibnVtYmVyT2ZNb2R1bGVzXCI6IDAsXG4gICAgICAgIFwibnVtYmVyT2ZQcm92aWRlcnNcIjogMyxcbiAgICAgICAgXCJyZXNvdXJjZXNcIjogT2JqZWN0IHtcbiAgICAgICAgICBcImF3c1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJrbXNfa2V5XCI6IDEsXG4gICAgICAgICAgICBcInMzX2J1Y2tldFwiOiAzLFxuICAgICAgICAgICAgXCJzM19idWNrZXRfb2JqZWN0XCI6IDIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdvb2dsZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgXCJjb21wdXRlX2F1dG9zY2FsZXJcIjogMSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwib3RoZXJcIjogT2JqZWN0IHtcbiAgICAgICAgICAgIFwib3RoZXJcIjogMSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIGApO1xuICB9KTtcbn0pO1xuIl19