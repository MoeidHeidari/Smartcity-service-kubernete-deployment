"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AttributeTypeModel = exports.TokenizableTypes = void 0;
var TokenizableTypes;
(function (TokenizableTypes) {
    TokenizableTypes["STRING"] = "string";
    TokenizableTypes["STRING_LIST"] = "string[]";
    TokenizableTypes["NUMBER"] = "number";
    TokenizableTypes["NUMBER_LIST"] = "number[]";
    TokenizableTypes["BOOLEAN"] = "boolean";
})(TokenizableTypes = exports.TokenizableTypes || (exports.TokenizableTypes = {}));
class AttributeTypeModel {
    constructor(_type, options) {
        this._type = _type;
        this.typeName = _type;
        this.isBlock = !!options.isBlock;
        this.isList = !!options.isList;
        this.isSet = !!options.isSet;
        this.isMap = !!options.isMap;
        this.isComputed = !!options.isComputed;
        this.isOptional = !!options.isOptional;
        this.isRequired = !!options.isRequired;
        this.isSingleItem = !!options.isSingleItem;
        this.level = options.level;
        this.struct = options.struct;
        this.isNested = !!options.isNested;
        if (options.struct) {
            options.struct.isSingleItem = this.isSingleItem || false;
        }
    }
    get name() {
        var _a, _b;
        // computed map wrappers
        if (this.isComputedStringMap)
            return `cdktf.StringMap`;
        if (this.isComputedNumberMap)
            return `cdktf.NumberMap`;
        if (this.isComputedBooleanMap)
            return `cdktf.BooleanMap`;
        if (this.isComputedAnyMap)
            return `cdktf.AnyMap`;
        // map of booleans has token support, but booleans don't
        if (this.isBooleanMap)
            return `{ [key: string]: (${this._type} | cdktf.IResolvable) }`;
        // other maps with token support
        if (this.isTokenizableMap)
            return `{ [key: string]: ${this._type} }`;
        // maps without token support
        if (this.isMap)
            return `{ [key: string]: ${this._type} } | cdktf.IResolvable`;
        const hasListRepresentation = this.isList || this.isSet;
        // single item list
        if (hasListRepresentation && !this.isComputed && this.isSingleItem)
            return `${this._type}`;
        // neither boolean nor boolean[] is tokenizable, so both parts need IResolvable
        if (hasListRepresentation && this._type === TokenizableTypes.BOOLEAN)
            return "Array<boolean | cdktf.IResolvable> | cdktf.IResolvable";
        // non-computed list of primitives
        if (hasListRepresentation && !this.isComputed && this.isPrimitive)
            return `${this._type}[]`;
        // non-computed list of non-primitives
        if (hasListRepresentation && !this.isComputed && !this.isPrimitive)
            return `${this._type}[] | cdktf.IResolvable`;
        // computed lists of primitive types
        if (hasListRepresentation && this.isComputed && this.isPrimitive)
            return `${this._type}[]`;
        // computed lists of simple types
        if (hasListRepresentation && this.isComputed && !((_a = this.struct) === null || _a === void 0 ? void 0 : _a.isClass))
            return `${this._type}[] | cdktf.IResolvable`;
        // complex computed list
        if (hasListRepresentation && this.isComputed && this.isComplex)
            return `${this._type}[]`;
        // boolean
        if (this._type === TokenizableTypes.BOOLEAN)
            return `boolean | cdktf.IResolvable`;
        // custom structs
        if (this.isComplex && !((_b = this.struct) === null || _b === void 0 ? void 0 : _b.isClass) && !this.isSingleItem) {
            return `${this._type} | cdktf.IResolvable`;
        }
        // all other types
        return this._type;
    }
    get storedName() {
        let name = this.name;
        return `${name}${this.isOptional ? " | undefined" : ""}`;
    }
    get isComplex() {
        return !!this.struct;
    }
    get isPrimitive() {
        return !this.isComplex;
    }
    get isString() {
        return this.name === TokenizableTypes.STRING;
    }
    get isNumber() {
        return this.name === TokenizableTypes.NUMBER;
    }
    get isStringSet() {
        return this.isSet && this.name === TokenizableTypes.STRING_LIST;
    }
    get isNumberSet() {
        return this.isSet && this._type === TokenizableTypes.NUMBER;
    }
    get isBooleanSet() {
        return this.isSet && this._type === TokenizableTypes.BOOLEAN;
    }
    get isStringList() {
        return this.isList && this.name === TokenizableTypes.STRING_LIST;
    }
    get isNumberList() {
        return this.isList && this._type === TokenizableTypes.NUMBER;
    }
    get isBooleanList() {
        return this.isList && this._type === TokenizableTypes.BOOLEAN;
    }
    get isBoolean() {
        return (this._type === TokenizableTypes.BOOLEAN && !this.isList && !this.isMap);
    }
    get isStringMap() {
        return this.isMap && this._type === TokenizableTypes.STRING;
    }
    get isComputedStringMap() {
        return this.isStringMap && this.isComputed && !this.isOptional;
    }
    get isNumberMap() {
        return this.isMap && this._type === TokenizableTypes.NUMBER;
    }
    get isComputedNumberMap() {
        return this.isNumberMap && this.isComputed && !this.isOptional;
    }
    get isBooleanMap() {
        return this.isMap && this._type === TokenizableTypes.BOOLEAN;
    }
    get isComputedBooleanMap() {
        return this.isBooleanMap && this.isComputed && !this.isOptional;
    }
    get isAnyMap() {
        return this.isMap && this._type === "any";
    }
    get isComputedAnyMap() {
        return this.isAnyMap && this.isComputed && !this.isOptional;
    }
    get isTokenizableMap() {
        return (this.isMap &&
            !this.isList &&
            (Object.values(TokenizableTypes).includes(this._type) ||
                this._type === "any"));
    }
    get isComputedComplex() {
        return this.isComputed && this.isComplex;
    }
    get isRootType() {
        return this.level === 2;
    }
    get isComputedPrimitive() {
        return this.isComputed && this.isPrimitive;
    }
    get isTokenizable() {
        return Object.values(TokenizableTypes).includes(this.name);
    }
    get innerType() {
        return this._type;
    }
}
exports.AttributeTypeModel = AttributeTypeModel;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXR0cmlidXRlLXR5cGUtbW9kZWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJhdHRyaWJ1dGUtdHlwZS1tb2RlbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFnQkEsSUFBWSxnQkFNWDtBQU5ELFdBQVksZ0JBQWdCO0lBQzFCLHFDQUFpQixDQUFBO0lBQ2pCLDRDQUF3QixDQUFBO0lBQ3hCLHFDQUFpQixDQUFBO0lBQ2pCLDRDQUF3QixDQUFBO0lBQ3hCLHVDQUFtQixDQUFBO0FBQ3JCLENBQUMsRUFOVyxnQkFBZ0IsR0FBaEIsd0JBQWdCLEtBQWhCLHdCQUFnQixRQU0zQjtBQU9ELE1BQWEsa0JBQWtCO0lBYzdCLFlBQW9CLEtBQWEsRUFBRSxPQUFrQztRQUFqRCxVQUFLLEdBQUwsS0FBSyxDQUFRO1FBQy9CLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUM7UUFDakMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztRQUMvQixJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO1FBQzdCLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7UUFDN0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQztRQUN2QyxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUM7UUFDdkMsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQztRQUMzQyxJQUFJLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFL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dCB9IGZyb20gXCIuL3N0cnVjdFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEF0dHJpYnV0ZVR5cGVNb2RlbE9wdGlvbnMge1xuICBpc0Jsb2NrPzogYm9vbGVhbjtcbiAgc3RydWN0PzogU3RydWN0O1xuICBpc0xpc3Q/OiBib29sZWFuO1xuICBpc1NldD86IGJvb2xlYW47XG4gIGlzQ29tcHV0ZWQ/OiBib29sZWFuO1xuICBpc09wdGlvbmFsPzogYm9vbGVhbjtcbiAgaXNSZXF1aXJlZD86IGJvb2xlYW47XG4gIGlzU2luZ2xlSXRlbT86IGJvb2xlYW47XG4gIGlzTWFwPzogYm9vbGVhbjtcbiAgbGV2ZWw/OiBudW1iZXI7XG4gIGlzTmVzdGVkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGVudW0gVG9rZW5pemFibGVUeXBlcyB7XG4gIFNUUklORyA9IFwic3RyaW5nXCIsXG4gIFNUUklOR19MSVNUID0gXCJzdHJpbmdbXVwiLFxuICBOVU1CRVIgPSBcIm51bWJlclwiLFxuICBOVU1CRVJfTElTVCA9IFwibnVtYmVyW11cIixcbiAgQk9PTEVBTiA9IFwiYm9vbGVhblwiLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXB1dGVkQ29tcGxleE9wdGlvbnMge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZVR5cGVNb2RlbCB7XG4gIHB1YmxpYyBpc0Jsb2NrPzogYm9vbGVhbjtcbiAgcHVibGljIGlzTGlzdDogYm9vbGVhbjtcbiAgcHVibGljIGlzU2V0OiBib29sZWFuO1xuICBwdWJsaWMgaXNDb21wdXRlZDogYm9vbGVhbjtcbiAgcHVibGljIGlzT3B0aW9uYWw6IGJvb2xlYW47XG4gIHB1YmxpYyBpc1JlcXVpcmVkPzogYm9vbGVhbjtcbiAgcHVibGljIGlzU2luZ2xlSXRlbT86IGJvb2xlYW47IC8vIGEgYmxvY2sgd2l0aCBtYXggb25lIGl0ZW0gaW4gaXRcbiAgcHVibGljIGlzTWFwOiBib29sZWFuO1xuICBwdWJsaWMgc3RydWN0PzogU3RydWN0O1xuICBwdWJsaWMgbGV2ZWw/OiBudW1iZXI7XG4gIHB1YmxpYyB0eXBlTmFtZTogc3RyaW5nO1xuICBwdWJsaWMgaXNOZXN0ZWQ/OiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX3R5cGU6IHN0cmluZywgb3B0aW9uczogQXR0cmlidXRlVHlwZU1vZGVsT3B0aW9ucykge1xuICAgIHRoaXMudHlwZU5hbWUgPSBfdHlwZTtcbiAgICB0aGlzLmlzQmxvY2sgPSAhIW9wdGlvbnMuaXNCbG9jaztcbiAgICB0aGlzLmlzTGlzdCA9ICEhb3B0aW9ucy5pc0xpc3Q7XG4gICAgdGhpcy5pc1NldCA9ICEhb3B0aW9ucy5pc1NldDtcbiAgICB0aGlzLmlzTWFwID0gISFvcHRpb25zLmlzTWFwO1xuICAgIHRoaXMuaXNDb21wdXRlZCA9ICEhb3B0aW9ucy5pc0NvbXB1dGVkO1xuICAgIHRoaXMuaXNPcHRpb25hbCA9ICEhb3B0aW9ucy5pc09wdGlvbmFsO1xuICAgIHRoaXMuaXNSZXF1aXJlZCA9ICEhb3B0aW9ucy5pc1JlcXVpcmVkO1xuICAgIHRoaXMuaXNTaW5nbGVJdGVtID0gISFvcHRpb25zLmlzU2luZ2xlSXRlbTtcbiAgICB0aGlzLmxldmVsID0gb3B0aW9ucy5sZXZlbDtcbiAgICB0aGlzLnN0cnVjdCA9IG9wdGlvbnMuc3RydWN0O1xuICAgIHRoaXMuaXNOZXN0ZWQgPSAhIW9wdGlvbnMuaXNOZXN0ZWQ7XG4gICAgaWYgKG9wdGlvbnMuc3RydWN0KSB7XG4gICAgICBvcHRpb25zLnN0cnVjdC5pc1NpbmdsZUl0ZW0gPSB0aGlzLmlzU2luZ2xlSXRlbSB8fCBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHtcbiAgICAvLyBjb21wdXRlZCBtYXAgd3JhcHBlcnNcbiAgICBpZiAodGhpcy5pc0NvbXB1dGVkU3RyaW5nTWFwKSByZXR1cm4gYGNka3RmLlN0cmluZ01hcGA7XG4gICAgaWYgKHRoaXMuaXNDb21wdXRlZE51bWJlck1hcCkgcmV0dXJuIGBjZGt0Zi5OdW1iZXJNYXBgO1xuICAgIGlmICh0aGlzLmlzQ29tcHV0ZWRCb29sZWFuTWFwKSByZXR1cm4gYGNka3RmLkJvb2xlYW5NYXBgO1xuICAgIGlmICh0aGlzLmlzQ29tcHV0ZWRBbnlNYXApIHJldHVybiBgY2RrdGYuQW55TWFwYDtcblxuICAgIC8vIG1hcCBvZiBib29sZWFucyBoYXMgdG9rZW4gc3VwcG9ydCwgYnV0IGJvb2xlYW5zIGRvbid0XG4gICAgaWYgKHRoaXMuaXNCb29sZWFuTWFwKVxuICAgICAgcmV0dXJuIGB7IFtrZXk6IHN0cmluZ106ICgke3RoaXMuX3R5cGV9IHwgY2RrdGYuSVJlc29sdmFibGUpIH1gO1xuXG4gICAgLy8gb3RoZXIgbWFwcyB3aXRoIHRva2VuIHN1cHBvcnRcbiAgICBpZiAodGhpcy5pc1Rva2VuaXphYmxlTWFwKSByZXR1cm4gYHsgW2tleTogc3RyaW5nXTogJHt0aGlzLl90eXBlfSB9YDtcblxuICAgIC8vIG1hcHMgd2l0aG91dCB0b2tlbiBzdXBwb3J0XG4gICAgaWYgKHRoaXMuaXNNYXApXG4gICAgICByZXR1cm4gYHsgW2tleTogc3RyaW5nXTogJHt0aGlzLl90eXBlfSB9IHwgY2RrdGYuSVJlc29sdmFibGVgO1xuXG4gICAgY29uc3QgaGFzTGlzdFJlcHJlc2VudGF0aW9uID0gdGhpcy5pc0xpc3QgfHwgdGhpcy5pc1NldDtcblxuICAgIC8vIHNpbmdsZSBpdGVtIGxpc3RcbiAgICBpZiAoaGFzTGlzdFJlcHJlc2VudGF0aW9uICYmICF0aGlzLmlzQ29tcHV0ZWQgJiYgdGhpcy5pc1NpbmdsZUl0ZW0pXG4gICAgICByZXR1cm4gYCR7dGhpcy5fdHlwZX1gO1xuXG4gICAgLy8gbmVpdGhlciBib29sZWFuIG5vciBib29sZWFuW10gaXMgdG9rZW5pemFibGUsIHNvIGJvdGggcGFydHMgbmVlZCBJUmVzb2x2YWJsZVxuICAgIGlmIChoYXNMaXN0UmVwcmVzZW50YXRpb24gJiYgdGhpcy5fdHlwZSA9PT0gVG9rZW5pemFibGVUeXBlcy5CT09MRUFOKVxuICAgICAgcmV0dXJuIFwiQXJyYXk8Ym9vbGVhbiB8IGNka3RmLklSZXNvbHZhYmxlPiB8IGNka3RmLklSZXNvbHZhYmxlXCI7XG5cbiAgICAvLyBub24tY29tcHV0ZWQgbGlzdCBvZiBwcmltaXRpdmVzXG4gICAgaWYgKGhhc0xpc3RSZXByZXNlbnRhdGlvbiAmJiAhdGhpcy5pc0NvbXB1dGVkICYmIHRoaXMuaXNQcmltaXRpdmUpXG4gICAgICByZXR1cm4gYCR7dGhpcy5fdHlwZX1bXWA7XG5cbiAgICAvLyBub24tY29tcHV0ZWQgbGlzdCBvZiBub24tcHJpbWl0aXZlc1xuICAgIGlmIChoYXNMaXN0UmVwcmVzZW50YXRpb24gJiYgIXRoaXMuaXNDb21wdXRlZCAmJiAhdGhpcy5pc1ByaW1pdGl2ZSlcbiAgICAgIHJldHVybiBgJHt0aGlzLl90eXBlfVtdIHwgY2RrdGYuSVJlc29sdmFibGVgO1xuXG4gICAgLy8gY29tcHV0ZWQgbGlzdHMgb2YgcHJpbWl0aXZlIHR5cGVzXG4gICAgaWYgKGhhc0xpc3RSZXByZXNlbnRhdGlvbiAmJiB0aGlzLmlzQ29tcHV0ZWQgJiYgdGhpcy5pc1ByaW1pdGl2ZSlcbiAgICAgIHJldHVybiBgJHt0aGlzLl90eXBlfVtdYDtcblxuICAgIC8vIGNvbXB1dGVkIGxpc3RzIG9mIHNpbXBsZSB0eXBlc1xuICAgIGlmIChoYXNMaXN0UmVwcmVzZW50YXRpb24gJiYgdGhpcy5pc0NvbXB1dGVkICYmICF0aGlzLnN0cnVjdD8uaXNDbGFzcylcbiAgICAgIHJldHVybiBgJHt0aGlzLl90eXBlfVtdIHwgY2RrdGYuSVJlc29sdmFibGVgO1xuXG4gICAgLy8gY29tcGxleCBjb21wdXRlZCBsaXN0XG4gICAgaWYgKGhhc0xpc3RSZXByZXNlbnRhdGlvbiAmJiB0aGlzLmlzQ29tcHV0ZWQgJiYgdGhpcy5pc0NvbXBsZXgpXG4gICAgICByZXR1cm4gYCR7dGhpcy5fdHlwZX1bXWA7XG5cbiAgICAvLyBib29sZWFuXG4gICAgaWYgKHRoaXMuX3R5cGUgPT09IFRva2VuaXphYmxlVHlwZXMuQk9PTEVBTilcbiAgICAgIHJldHVybiBgYm9vbGVhbiB8IGNka3RmLklSZXNvbHZhYmxlYDtcblxuICAgIC8vIGN1c3RvbSBzdHJ1Y3RzXG4gICAgaWYgKHRoaXMuaXNDb21wbGV4ICYmICF0aGlzLnN0cnVjdD8uaXNDbGFzcyAmJiAhdGhpcy5pc1NpbmdsZUl0ZW0pIHtcbiAgICAgIHJldHVybiBgJHt0aGlzLl90eXBlfSB8IGNka3RmLklSZXNvbHZhYmxlYDtcbiAgICB9XG5cbiAgICAvLyBhbGwgb3RoZXIgdHlwZXNcbiAgICByZXR1cm4gdGhpcy5fdHlwZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgc3RvcmVkTmFtZSgpOiBzdHJpbmcge1xuICAgIGxldCBuYW1lID0gdGhpcy5uYW1lO1xuXG4gICAgcmV0dXJuIGAke25hbWV9JHt0aGlzLmlzT3B0aW9uYWwgPyBcIiB8IHVuZGVmaW5lZFwiIDogXCJcIn1gO1xuICB9XG5cbiAgcHVibGljIGdldCBpc0NvbXBsZXgoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5zdHJ1Y3Q7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzUHJpbWl0aXZlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5pc0NvbXBsZXg7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzU3RyaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm5hbWUgPT09IFRva2VuaXphYmxlVHlwZXMuU1RSSU5HO1xuICB9XG5cbiAgcHVibGljIGdldCBpc051bWJlcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lID09PSBUb2tlbml6YWJsZVR5cGVzLk5VTUJFUjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaXNTdHJpbmdTZXQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNTZXQgJiYgdGhpcy5uYW1lID09PSBUb2tlbml6YWJsZVR5cGVzLlNUUklOR19MSVNUO1xuICB9XG5cbiAgcHVibGljIGdldCBpc051bWJlclNldCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc1NldCAmJiB0aGlzLl90eXBlID09PSBUb2tlbml6YWJsZVR5cGVzLk5VTUJFUjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaXNCb29sZWFuU2V0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzU2V0ICYmIHRoaXMuX3R5cGUgPT09IFRva2VuaXphYmxlVHlwZXMuQk9PTEVBTjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaXNTdHJpbmdMaXN0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzTGlzdCAmJiB0aGlzLm5hbWUgPT09IFRva2VuaXphYmxlVHlwZXMuU1RSSU5HX0xJU1Q7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzTnVtYmVyTGlzdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc0xpc3QgJiYgdGhpcy5fdHlwZSA9PT0gVG9rZW5pemFibGVUeXBlcy5OVU1CRVI7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzQm9vbGVhbkxpc3QoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNMaXN0ICYmIHRoaXMuX3R5cGUgPT09IFRva2VuaXphYmxlVHlwZXMuQk9PTEVBTjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaXNCb29sZWFuKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLl90eXBlID09PSBUb2tlbml6YWJsZVR5cGVzLkJPT0xFQU4gJiYgIXRoaXMuaXNMaXN0ICYmICF0aGlzLmlzTWFwXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaXNTdHJpbmdNYXAoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNNYXAgJiYgdGhpcy5fdHlwZSA9PT0gVG9rZW5pemFibGVUeXBlcy5TVFJJTkc7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzQ29tcHV0ZWRTdHJpbmdNYXAoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNTdHJpbmdNYXAgJiYgdGhpcy5pc0NvbXB1dGVkICYmICF0aGlzLmlzT3B0aW9uYWw7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzTnVtYmVyTWFwKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzTWFwICYmIHRoaXMuX3R5cGUgPT09IFRva2VuaXphYmxlVHlwZXMuTlVNQkVSO1xuICB9XG5cbiAgcHVibGljIGdldCBpc0NvbXB1dGVkTnVtYmVyTWFwKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzTnVtYmVyTWFwICYmIHRoaXMuaXNDb21wdXRlZCAmJiAhdGhpcy5pc09wdGlvbmFsO1xuICB9XG5cbiAgcHVibGljIGdldCBpc0Jvb2xlYW5NYXAoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNNYXAgJiYgdGhpcy5fdHlwZSA9PT0gVG9rZW5pemFibGVUeXBlcy5CT09MRUFOO1xuICB9XG5cbiAgcHVibGljIGdldCBpc0NvbXB1dGVkQm9vbGVhbk1hcCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc0Jvb2xlYW5NYXAgJiYgdGhpcy5pc0NvbXB1dGVkICYmICF0aGlzLmlzT3B0aW9uYWw7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzQW55TWFwKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzTWFwICYmIHRoaXMuX3R5cGUgPT09IFwiYW55XCI7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzQ29tcHV0ZWRBbnlNYXAoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNBbnlNYXAgJiYgdGhpcy5pc0NvbXB1dGVkICYmICF0aGlzLmlzT3B0aW9uYWw7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzVG9rZW5pemFibGVNYXAoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuaXNNYXAgJiZcbiAgICAgICF0aGlzLmlzTGlzdCAmJlxuICAgICAgKE9iamVjdC52YWx1ZXMoVG9rZW5pemFibGVUeXBlcykuaW5jbHVkZXMoXG4gICAgICAgIHRoaXMuX3R5cGUgYXMgVG9rZW5pemFibGVUeXBlc1xuICAgICAgKSB8fFxuICAgICAgICB0aGlzLl90eXBlID09PSBcImFueVwiKVxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzQ29tcHV0ZWRDb21wbGV4KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzQ29tcHV0ZWQgJiYgdGhpcy5pc0NvbXBsZXg7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzUm9vdFR5cGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubGV2ZWwgPT09IDI7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzQ29tcHV0ZWRQcmltaXRpdmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNDb21wdXRlZCAmJiB0aGlzLmlzUHJpbWl0aXZlO1xuICB9XG5cbiAgcHVibGljIGdldCBpc1Rva2VuaXphYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKFRva2VuaXphYmxlVHlwZXMpLmluY2x1ZGVzKFxuICAgICAgdGhpcy5uYW1lIGFzIFRva2VuaXphYmxlVHlwZXNcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGdldCBpbm5lclR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3R5cGU7XG4gIH1cbn1cbiJdfQ==