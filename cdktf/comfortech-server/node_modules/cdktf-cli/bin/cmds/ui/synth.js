"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Synth = void 0;
const react_1 = __importDefault(require("react"));
const ink_1 = require("ink");
const cdktf_project_1 = require("./hooks/cdktf-project");
const components_1 = require("./components");
const status_1 = require("./components/bottom-bars/status");
const SynthOutput = ({ stacks }) => {
    return (react_1.default.createElement(ink_1.Text, null,
        "Generated Terraform code for the stacks:",
        " ", stacks === null || stacks === void 0 ? void 0 :
        stacks.map((s) => s.name).join(", ")));
};
exports.Synth = ({ outDir, synthCommand, }) => {
    const { returnValue, logEntries, status } = cdktf_project_1.useCdktfProject({ outDir, synthCommand }, (project) => project.synth());
    return (react_1.default.createElement(components_1.StreamView, { logs: logEntries },
        react_1.default.createElement(status_1.StatusBottomBar, { status: status },
            react_1.default.createElement(SynthOutput, { stacks: status.type === "done" ? returnValue : [] }))));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ludGguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzeW50aC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsa0RBQTBCO0FBQzFCLDZCQUEyQjtBQUUzQix5REFBd0Q7QUFDeEQsNkNBQTBDO0FBRTFDLDREQUFrRTtBQVlsRSxNQUFNLFdBQVcsR0FBRyxDQUFDLEVBQUUsTUFBTSxFQUFxQixFQUFzQixFQUFFO0lBQ3hFLE9BQU8sQ0FDTCw4QkFBQyxVQUFJOztRQUNzQyxHQUFHLEVBQzNDLE1BQU0sYUFBTixNQUFNO1FBQU4sTUFBTSxDQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUNoQyxDQUNSLENBQUM7QUFDSixDQUFDLENBQUM7QUFFVyxRQUFBLEtBQUssR0FBRyxDQUFDLEVBQ3BCLE1BQU0sRUFDTixZQUFZLEdBQ0EsRUFBc0IsRUFBRTtJQUNwQyxNQUFNLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsR0FBRywrQkFBZSxDQUN6RCxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsRUFDeEIsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FDN0IsQ0FBQztJQUVGLE9BQU8sQ0FDTCw4QkFBQyx1QkFBVSxJQUFDLElBQUksRUFBRSxVQUFVO1FBQzFCLDhCQUFDLHdCQUFlLElBQUMsTUFBTSxFQUFFLE1BQU07WUFDN0IsOEJBQUMsV0FBVyxJQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsSUFBSSxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsV0FBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUksQ0FDbkQsQ0FDUCxDQUNkLENBQUM7QUFDSixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSBcImlua1wiO1xuXG5pbXBvcnQgeyB1c2VDZGt0ZlByb2plY3QgfSBmcm9tIFwiLi9ob29rcy9jZGt0Zi1wcm9qZWN0XCI7XG5pbXBvcnQgeyBTdHJlYW1WaWV3IH0gZnJvbSBcIi4vY29tcG9uZW50c1wiO1xuaW1wb3J0IHsgU3ludGhlc2l6ZWRTdGFjayB9IGZyb20gXCIuLi8uLi8uLi9saWJcIjtcbmltcG9ydCB7IFN0YXR1c0JvdHRvbUJhciB9IGZyb20gXCIuL2NvbXBvbmVudHMvYm90dG9tLWJhcnMvc3RhdHVzXCI7XG5cbmludGVyZmFjZSBDb21tb25TeW50aENvbmZpZyB7XG4gIG91dERpcjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgU3ludGhDb25maWcgZXh0ZW5kcyBDb21tb25TeW50aENvbmZpZyB7XG4gIHN5bnRoQ29tbWFuZDogc3RyaW5nO1xufVxudHlwZSBTeW50aE91dHB1dENvbmZpZyA9IHtcbiAgc3RhY2tzOiBTeW50aGVzaXplZFN0YWNrW107XG59O1xuY29uc3QgU3ludGhPdXRwdXQgPSAoeyBzdGFja3MgfTogU3ludGhPdXRwdXRDb25maWcpOiBSZWFjdC5SZWFjdEVsZW1lbnQgPT4ge1xuICByZXR1cm4gKFxuICAgIDxUZXh0PlxuICAgICAgR2VuZXJhdGVkIFRlcnJhZm9ybSBjb2RlIGZvciB0aGUgc3RhY2tzOntcIiBcIn1cbiAgICAgIHtzdGFja3M/Lm1hcCgocykgPT4gcy5uYW1lKS5qb2luKFwiLCBcIil9XG4gICAgPC9UZXh0PlxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IFN5bnRoID0gKHtcbiAgb3V0RGlyLFxuICBzeW50aENvbW1hbmQsXG59OiBTeW50aENvbmZpZyk6IFJlYWN0LlJlYWN0RWxlbWVudCA9PiB7XG4gIGNvbnN0IHsgcmV0dXJuVmFsdWUsIGxvZ0VudHJpZXMsIHN0YXR1cyB9ID0gdXNlQ2RrdGZQcm9qZWN0KFxuICAgIHsgb3V0RGlyLCBzeW50aENvbW1hbmQgfSxcbiAgICAocHJvamVjdCkgPT4gcHJvamVjdC5zeW50aCgpXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8U3RyZWFtVmlldyBsb2dzPXtsb2dFbnRyaWVzfT5cbiAgICAgIDxTdGF0dXNCb3R0b21CYXIgc3RhdHVzPXtzdGF0dXN9PlxuICAgICAgICA8U3ludGhPdXRwdXQgc3RhY2tzPXtzdGF0dXMudHlwZSA9PT0gXCJkb25lXCIgPyByZXR1cm5WYWx1ZSEgOiBbXX0gLz5cbiAgICAgIDwvU3RhdHVzQm90dG9tQmFyPlxuICAgIDwvU3RyZWFtVmlldz5cbiAgKTtcbn07XG4iXX0=