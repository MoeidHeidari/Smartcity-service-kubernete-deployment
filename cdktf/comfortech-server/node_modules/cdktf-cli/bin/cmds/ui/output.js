"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Output = void 0;
/* eslint-disable no-control-regex */
const react_1 = __importDefault(require("react"));
const cdktf_project_1 = require("./hooks/cdktf-project");
const components_1 = require("./components");
exports.Output = ({ outDir, targetStacks, synthCommand, onOutputsRetrieved, outputsPath, }) => {
    const { status, logEntries, returnValue } = cdktf_project_1.useCdktfProject({ outDir, synthCommand }, async (project) => {
        const outputs = await project.fetchOutputs({ stackNames: targetStacks });
        onOutputsRetrieved(outputs);
        return outputs;
    });
    const bottomBar = status.type === "done" ? (react_1.default.createElement(components_1.OutputsBottomBar, { outputs: returnValue, outputsFile: outputsPath })) : (react_1.default.createElement(components_1.StatusBottomBar, { status: status }));
    return react_1.default.createElement(components_1.StreamView, { logs: logEntries }, bottomBar);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3V0cHV0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsib3V0cHV0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxxQ0FBcUM7QUFDckMsa0RBQTBCO0FBRTFCLHlEQUF3RDtBQUN4RCw2Q0FBNkU7QUFVaEUsUUFBQSxNQUFNLEdBQUcsQ0FBQyxFQUNyQixNQUFNLEVBQ04sWUFBWSxFQUNaLFlBQVksRUFDWixrQkFBa0IsRUFDbEIsV0FBVyxHQUNFLEVBQXNCLEVBQUU7SUFDckMsTUFBTSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLEdBQUcsK0JBQWUsQ0FDekQsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLEVBQ3hCLEtBQUssRUFBRSxPQUFPLEVBQUUsRUFBRTtRQUNoQixNQUFNLE9BQU8sR0FBRyxNQUFNLE9BQU8sQ0FBQyxZQUFZLENBQUMsRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQztRQUN6RSxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM1QixPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDLENBQ0YsQ0FBQztJQUVGLE1BQU0sU0FBUyxHQUNiLE1BQU0sQ0FBQyxJQUFJLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUN2Qiw4QkFBQyw2QkFBZ0IsSUFBQyxPQUFPLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxXQUFXLEdBQUksQ0FDckUsQ0FBQyxDQUFDLENBQUMsQ0FDRiw4QkFBQyw0QkFBZSxJQUFDLE1BQU0sRUFBRSxNQUFNLEdBQUksQ0FDcEMsQ0FBQztJQUVKLE9BQU8sOEJBQUMsdUJBQVUsSUFBQyxJQUFJLEVBQUUsVUFBVSxJQUFHLFNBQVMsQ0FBYyxDQUFDO0FBQ2hFLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnRyb2wtcmVnZXggKi9cbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IE5lc3RlZFRlcnJhZm9ybU91dHB1dHMgfSBmcm9tIFwiLi4vLi4vLi4vbGliL291dHB1dFwiO1xuaW1wb3J0IHsgdXNlQ2RrdGZQcm9qZWN0IH0gZnJvbSBcIi4vaG9va3MvY2RrdGYtcHJvamVjdFwiO1xuaW1wb3J0IHsgU3RyZWFtVmlldywgT3V0cHV0c0JvdHRvbUJhciwgU3RhdHVzQm90dG9tQmFyIH0gZnJvbSBcIi4vY29tcG9uZW50c1wiO1xuXG50eXBlIE91dHB1dENvbmZpZyA9IHtcbiAgb3V0RGlyOiBzdHJpbmc7XG4gIHRhcmdldFN0YWNrcz86IHN0cmluZ1tdO1xuICBzeW50aENvbW1hbmQ6IHN0cmluZztcbiAgb25PdXRwdXRzUmV0cmlldmVkOiAob3V0cHV0czogTmVzdGVkVGVycmFmb3JtT3V0cHV0cykgPT4gdm9pZDtcbiAgb3V0cHV0c1BhdGg/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgY29uc3QgT3V0cHV0ID0gKHtcbiAgb3V0RGlyLFxuICB0YXJnZXRTdGFja3MsXG4gIHN5bnRoQ29tbWFuZCxcbiAgb25PdXRwdXRzUmV0cmlldmVkLFxuICBvdXRwdXRzUGF0aCxcbn06IE91dHB1dENvbmZpZyk6IFJlYWN0LlJlYWN0RWxlbWVudCA9PiB7XG4gIGNvbnN0IHsgc3RhdHVzLCBsb2dFbnRyaWVzLCByZXR1cm5WYWx1ZSB9ID0gdXNlQ2RrdGZQcm9qZWN0KFxuICAgIHsgb3V0RGlyLCBzeW50aENvbW1hbmQgfSxcbiAgICBhc3luYyAocHJvamVjdCkgPT4ge1xuICAgICAgY29uc3Qgb3V0cHV0cyA9IGF3YWl0IHByb2plY3QuZmV0Y2hPdXRwdXRzKHsgc3RhY2tOYW1lczogdGFyZ2V0U3RhY2tzIH0pO1xuICAgICAgb25PdXRwdXRzUmV0cmlldmVkKG91dHB1dHMpO1xuICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgfVxuICApO1xuXG4gIGNvbnN0IGJvdHRvbUJhciA9XG4gICAgc3RhdHVzLnR5cGUgPT09IFwiZG9uZVwiID8gKFxuICAgICAgPE91dHB1dHNCb3R0b21CYXIgb3V0cHV0cz17cmV0dXJuVmFsdWV9IG91dHB1dHNGaWxlPXtvdXRwdXRzUGF0aH0gLz5cbiAgICApIDogKFxuICAgICAgPFN0YXR1c0JvdHRvbUJhciBzdGF0dXM9e3N0YXR1c30gLz5cbiAgICApO1xuXG4gIHJldHVybiA8U3RyZWFtVmlldyBsb2dzPXtsb2dFbnRyaWVzfT57Ym90dG9tQmFyfTwvU3RyZWFtVmlldz47XG59O1xuIl19